const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CTnmfCPK.js","assets/router-CbvfO1vz.js","assets/react-CMmhtoO5.js","assets/index-DZZeTtSo.css"])))=>i.map(i=>d[i]);
import{u as e,j as s,l as a,_ as r,a as n}from"./index-CTnmfCPK.js";import{r as t,u as i,L as o}from"./router-CbvfO1vz.js";import{F as l,a as d,b as c}from"./index-DOWsMtyp.js";/* empty css                    */import"./react-CMmhtoO5.js";import"./iconBase-YQ9d7kAD.js";function m(){const[m,h]=t.useState({email:"",password:""}),[u,p]=t.useState(""),j=i(),[g,x]=t.useState(!1),{currentUser:f}=e();t.useEffect((()=>{f&&("admin"===f.role?j("/admin/dashboard",{replace:!0}):"vendor"===f.role?j("/vendor/dashboard",{replace:!0}):j("/dashboard",{replace:!0}))}),[f,j]);const w=e=>{h((s=>({...s,[e.target.name]:e.target.value}))),p("")};return s.jsx("div",{className:"auth-container",children:s.jsxs("div",{className:"auth-card",children:[s.jsxs("div",{className:"auth-header",children:[s.jsx("h2",{children:"Welcome Back"}),s.jsx("p",{children:"Sign in to access your account"})]}),s.jsxs("div",{className:"auth-form",children:[u&&s.jsx("div",{className:"auth-message error-message",children:u}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(""),x(!0);try{const e=await a(m.email,m.password);if(!e||!e.user)throw new Error("Login failed. Please check your credentials.");const{user:s}=e;s.token&&localStorage.setItem("authToken",s.token);const{signInWithEmailAndPassword:t}=await r((async()=>{const{signInWithEmailAndPassword:e}=await import("./index-CTnmfCPK.js").then((e=>e.J));return{signInWithEmailAndPassword:e}}),__vite__mapDeps([0,1,2,3]));await t(n,m.email,m.password),h({email:"",password:""});let i="/dashboard";"admin"===s.role?i="/admin/dashboard":"vendor"===s.role&&(i="/vendor/dashboard"),j(i,{replace:!0})}catch(s){h((e=>({...e,password:""}))),p(s.message||"Login failed. Please try again.")}finally{x(!1)}},children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"email",children:"Email Address"}),s.jsxs("div",{className:"input-with-icon",children:[s.jsx("input",{type:"email",id:"email",name:"email",value:m.email,onChange:w,className:"form-control",placeholder:"Enter your email",required:!0,disabled:g}),s.jsx(l,{className:"input-icon"})]})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:"0.5rem"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[s.jsx("label",{htmlFor:"password",children:"Password"}),s.jsx(o,{to:"/forgot-password",className:"forgot-password-link",style:{fontSize:"0.75rem",color:"#4f46e5",textDecoration:"none",fontWeight:500,transition:"var(--auth-transition)"},children:"Forgot password?"})]}),s.jsxs("div",{className:"input-with-icon",children:[s.jsx("input",{type:"password",id:"password",name:"password",value:m.password,onChange:w,className:"form-control",placeholder:"••••••••",required:!0,disabled:g}),s.jsx(d,{className:"input-icon"})]})]}),s.jsx("button",{type:"submit",className:"btn",disabled:g,style:{marginTop:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"loading-spinner"}),"Signing in..."]}):s.jsxs(s.Fragment,{children:[s.jsx(c,{}),"Sign In"]})})]})]}),s.jsxs("div",{className:"auth-footer",children:["Don't have an account?"," ",s.jsx(o,{to:"/register",children:"Create account"})]})]})})}export{m as default};
