import{j as a}from"./index-DbrkFvWc.js";import{r as s,u as e,L as l}from"./router-DJX9oSP-.js";import{a as i}from"./axios-rSMZb3Ae.js";import"./react-CMmhtoO5.js";const n=({onLogout:n})=>{const[o,r]=s.useState(null),[c,t]=s.useState([]),[d,h]=s.useState(!0),[x,g]=s.useState(null),j=e();s.useEffect((()=>{(async()=>{try{const a=localStorage.getItem("token");if(!a)return void j("/login");const s=await i.get("http://localhost:5000/api/auth/me",{headers:{Authorization:`Bearer ${a}`}});r(s.data);const e=await i.get("http://localhost:5000/api/bookings",{headers:{Authorization:`Bearer ${a}`}});t(e.data.bookings||[]),h(!1)}catch(a){g("Failed to load dashboard data. Please try again."),h(!1)}})()}),[j]);return d?a.jsx("div",{className:"loading-container",children:a.jsx("div",{className:"spinner"})}):x?a.jsxs("div",{className:"error-container",children:[a.jsx("h2",{children:"Error"}),a.jsx("p",{children:x}),a.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Try Again"})]}):a.jsxs("div",{className:"dashboard-page",children:[a.jsx("div",{className:"dashboard-header",children:a.jsxs("div",{className:"container",children:[a.jsx("h1",{children:"My Dashboard"}),a.jsxs("p",{children:["Welcome back, ",null==o?void 0:o.name,"!"]})]})}),a.jsx("div",{className:"container",children:a.jsxs("div",{className:"dashboard-grid",children:[a.jsxs("div",{className:"dashboard-card profile-card",children:[a.jsx("h2",{children:"My Profile"}),a.jsxs("div",{className:"profile-info",children:[a.jsx("div",{className:"profile-avatar",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"profile-details",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Name:"})," ",null==o?void 0:o.name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",null==o?void 0:o.email]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Role:"})," ",null==o?void 0:o.role]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Member Since:"})," ",new Date(null==o?void 0:o.createdAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"profile-actions",children:[a.jsx("button",{className:"btn btn-outline",children:"Edit Profile"}),a.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole"),n(),j("/")},className:"btn btn-danger",children:"Logout"})]})]}),a.jsxs("div",{className:"dashboard-card bookings-card",children:[a.jsx("h2",{children:"Recent Bookings"}),c.length>0?a.jsx("div",{className:"bookings-list",children:c.slice(0,3).map((s=>{var e,i,n;return a.jsxs("div",{className:"booking-item",children:[a.jsxs("div",{className:"booking-info",children:[a.jsx("h3",{children:(null==(e=s.package)?void 0:e.title)||"Package Title"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",a.jsx("span",{className:`status ${s.status}`,children:s.status})]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(s.bookingDate).toLocaleDateString()]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Price:"})," â‚¹",(null==(i=s.price)?void 0:i.toLocaleString())||"0"]})]}),a.jsx(l,{to:`/packages/${null==(n=s.package)?void 0:n._id}`,className:"btn btn-sm btn-primary",children:"View Package"})]},s._id)}))}):a.jsxs("div",{className:"no-bookings",children:[a.jsx("p",{children:"You haven't made any bookings yet."}),a.jsx(l,{to:"/packages",className:"btn btn-primary",children:"Browse Packages"})]}),c.length>3&&a.jsx(l,{to:"/bookings",className:"btn btn-outline view-all",children:"View All Bookings"})]}),a.jsxs("div",{className:"dashboard-card actions-card",children:[a.jsx("h2",{children:"Quick Actions"}),a.jsxs("div",{className:"quick-actions",children:[a.jsxs(l,{to:"/packages",className:"action-item",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),a.jsx("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"})]}),"Browse Packages"]}),a.jsxs(l,{to:"/bookings",className:"action-item",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0118 9.375v9.375a3 3 0 003-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 00-.673-.05A3 3 0 0015 1.5h-1.5a3 3 0 00-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6zM13.5 3A1.5 1.5 0 0012 4.5h4.5A1.5 1.5 0 0015 3h-1.5z",clipRule:"evenodd"}),a.jsx("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 013 20.625V9.375zM6 12a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H6.75a.75.75 0 01-.75-.75V12zm2.25 0a.75.75 0 01.75-.75h3.75a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM6 15a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H6.75a.75.75 0 01-.75-.75V15zm2.25 0a.75.75 0 01.75-.75h3.75a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM6 18a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H6.75a.75.75 0 01-.75-.75V18zm2.25 0a.75.75 0 01.75-.75h3.75a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75z",clipRule:"evenodd"})]}),"My Bookings"]}),a.jsxs(l,{to:"/packages/top",className:"action-item",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z",clipRule:"evenodd"})}),"Top Packages"]}),a.jsxs(l,{to:"/packages/budget",className:"action-item",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"})}),"Budget Packages"]})]})]})]})})]})};export{n as default};
