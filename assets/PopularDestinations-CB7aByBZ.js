import{j as a,c as e,d as s,g as i}from"./index-CTnmfCPK.js";import{r as n,L as t}from"./router-CbvfO1vz.js";import"./react-CMmhtoO5.js";const c=()=>{const[c,r]=n.useState([]),[l,d]=n.useState(!0),[o,h]=n.useState(null);return n.useEffect((()=>{(async()=>{try{const a=e(s,"tourPackages"),n=await i(a);if(!n.exists())return r([]),void d(!1);const t=[];n.forEach((a=>{t.push({id:a.key,...a.val()})}));const c=t.reduce(((a,e)=>(a[e.destination]||(a[e.destination]={name:e.destination,packages:[],image:e.imageUrl||null}),a[e.destination].packages.push(e),a)),{}),l=Object.values(c).sort(((a,e)=>e.packages.length-a.packages.length)).slice(0,8);r(l),d(!1)}catch(a){h("Failed to fetch destinations. Please try again later."),d(!1)}})()}),[]),l?a.jsx("div",{className:"loading-container",children:a.jsx("div",{className:"spinner"})}):o?a.jsxs("div",{className:"error-container",children:[a.jsx("h2",{children:"Error"}),a.jsx("p",{children:o}),a.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Try Again"})]}):a.jsxs("div",{className:"popular-destinations-page",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"container",children:[a.jsx("h1",{children:"Popular Destinations"}),a.jsx("p",{children:"Discover amazing places and find your perfect vacation package"})]})}),a.jsx("div",{className:"container",children:a.jsx("div",{className:"destinations-grid",children:c.map((e=>a.jsxs("div",{className:"destination-card",children:[a.jsxs("div",{className:"destination-image",children:[a.jsx("img",{src:e.image||`https://source.unsplash.com/featured/600x400?${e.name},travel`,alt:e.name}),a.jsxs("div",{className:"destination-overlay",children:[a.jsx("h3",{children:e.name}),a.jsxs("p",{children:[e.packages.length," Packages Available"]})]})]}),a.jsxs("div",{className:"destination-content",children:[a.jsx("h4",{children:"Featured Packages"}),a.jsx("ul",{className:"featured-packages",children:e.packages.slice(0,3).map((e=>a.jsx("li",{children:a.jsxs(t,{to:`/packages/${e.id}`,children:[e.title," - â‚¹",e.price.toLocaleString()]})},e.id)))}),a.jsx(t,{to:`/packages/destination/${e.name}`,className:"btn btn-primary",children:"View All Packages"})]})]},e.name)))})})]})};export{c as default};
