import{j as e,i as a,b as i,c as s,d as n,g as r,e as o,h as t}from"./index-jW0ZXYkQ.js";import{r as l,u as d,L as c}from"./router-CE_eIJm-.js";/* empty css                   */import"./react-CMmhtoO5.js";function m(){const[m,u]=l.useState(""),[g,h]=l.useState(""),[p,x]=l.useState(""),[j,w]=l.useState(!1),y=d();return e.jsx("div",{className:"admin-login-page",children:e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:"Admin Login"}),e.jsx("p",{children:"Access the administration panel"}),e.jsxs("div",{style:{marginTop:"10px",textAlign:"center",fontSize:"12px",color:"#666"},children:[e.jsx("p",{children:"Use the following credentials:"}),e.jsx("p",{children:"Email: admin@gmail.com"}),e.jsx("p",{children:"Password: admin123"})]})]}),p&&e.jsx("div",{className:"admin-login-error",children:e.jsx("p",{children:p})}),e.jsxs("form",{className:"admin-login-form",onSubmit:async e=>{if(e.preventDefault(),m&&g)try{w(!0),x("");try{const e=(await a(i,m,g)).user,t=s(n,`users/${e.uid}`),l=await r(t);if(l.exists()){const e=l.val();"admin"!==e.role&&await o(t,{...e,role:"admin"})}else await o(t,{email:e.email,name:e.displayName||m.split("@")[0],role:"admin",createdAt:Date.now(),lastLogin:Date.now()});const d=(await r(t)).val();await o(t,{lastLogin:Date.now(),loginCount:(d.loginCount||0)+1},{merge:!0});const c={id:e.uid,email:e.email,name:d.name||e.displayName||m.split("@")[0],role:"admin"};localStorage.setItem("user",JSON.stringify(c)),localStorage.setItem("token",e.accessToken),y("/admin/dashboard")}catch(l){if("admin@gmail.com"!==m||"admin123"!==g||"auth/user-not-found"!==l.code&&"auth/invalid-credential"!==l.code)"auth/user-not-found"===l.code?x("No account found with this email. Please check your credentials."):"auth/wrong-password"===l.code?x("Incorrect password. Please try again."):"auth/invalid-credential"===l.code?x("Invalid login credentials. Please check your email and password."):"auth/too-many-requests"===l.code?x("Too many failed login attempts. Please try again later or reset your password."):x("An error occurred during login. Please try again.");else try{const e=(await t(i,m,g)).user,a=s(n,`users/${e.uid}`);await o(a,{email:m,name:"Administrator",role:"admin",createdAt:Date.now(),lastLogin:Date.now()});const r={id:e.uid,email:e.email,name:"Administrator",role:"admin"};return localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("token",e.accessToken),void y("/admin/dashboard")}catch(d){x("Failed to create admin account: "+d.message)}}}catch(c){x("An unexpected error occurred. Please try again.")}finally{w(!1)}else x("Email and password are required")},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:m,onChange:e=>u(e.target.value),placeholder:"admin@example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:g,onChange:e=>h(e.target.value),placeholder:"Enter your password"})]}),e.jsx("button",{type:"submit",disabled:j,className:"admin-login-button",children:j?"Logging in...":"Sign in"})]}),e.jsx("div",{className:"admin-login-divider",children:e.jsx("span",{children:"Not an administrator?"})}),e.jsxs("div",{className:"admin-login-footer",children:[e.jsx(c,{to:"/login",children:"User Login"}),e.jsx(c,{to:"/vendor/login",children:"Vendor Login"})]})]})})}export{m as default};
