import{j as e}from"./index-DbrkFvWc.js";import{r as a,u as s,L as r}from"./router-DJX9oSP-.js";/* empty css                   */import"./react-CMmhtoO5.js";import"./axios-rSMZb3Ae.js";function o({onLogin:o}){const[t,i]=a.useState({email:"",password:""}),[n,l]=a.useState(""),d=s(),[c,m]=a.useState(!1),p=e=>{i((a=>({...a,[e.target.name]:e.target.value}))),l("")};return e.jsx("div",{className:"login-page-container",children:e.jsxs("div",{className:"card login-form-card",children:[e.jsx("h2",{children:"Login"}),n&&e.jsx("p",{className:"error-message-login",children:n}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l("");try{m(!0);const e=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();e.ok?(o&&o(a.token,a.role),d("admin"===a.role?"/admin/dashboard":"/dashboard")):l(a.message||"Login failed. Please check your credentials.")}catch(a){l("An unexpected server error occurred. Please try again later.")}finally{m(!1)}},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"input",placeholder:"Enter your email",value:t.email,onChange:p,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",className:"input",placeholder:"Enter your password",value:t.password,onChange:p,required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Login"})]}),e.jsxs("p",{className:"login-page-text",children:["Don't have an account? ",e.jsx(r,{to:"/register",children:"Register here"})]})]})})}export{o as default};
