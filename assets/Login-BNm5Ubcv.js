const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C_BwQPEG.js","assets/router-CLN5X-po.js","assets/react-CMmhtoO5.js","assets/index-BKZGUzwL.css"])))=>i.map(i=>d[i]);
import{f as e,j as a,l as s,_ as r,b as n}from"./index-C_BwQPEG.js";import{r as o,u as i,L as t}from"./router-CLN5X-po.js";/* empty css                   */import"./react-CMmhtoO5.js";function l(){const[l,d]=o.useState({email:"",password:""}),[c,m]=o.useState(""),p=i(),[h,u]=o.useState(!1),{currentUser:g}=e();o.useEffect((()=>{g&&("admin"===g.role?p("/admin/dashboard",{replace:!0}):"vendor"===g.role?p("/vendor/dashboard",{replace:!0}):p("/dashboard",{replace:!0}))}),[g,p]);const w=e=>{d((a=>({...a,[e.target.name]:e.target.value}))),m("")};return a.jsx("div",{className:"login-page-container",children:a.jsxs("div",{className:"card login-form-card",children:[a.jsx("h2",{children:"Login"}),c&&a.jsx("p",{className:"error-message-login",children:c}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),m(""),u(!0);try{const e=await s(l.email,l.password);if(!e||!e.user)throw new Error("Login failed. Please check your credentials.");const{user:a}=e;a.token&&localStorage.setItem("authToken",a.token);const{signInWithEmailAndPassword:o}=await r((async()=>{const{signInWithEmailAndPassword:e}=await import("./index-C_BwQPEG.js").then((e=>e.D));return{signInWithEmailAndPassword:e}}),__vite__mapDeps([0,1,2,3]));await o(n,l.email,l.password),d({email:"",password:""});let i="/dashboard";"admin"===a.role?i="/admin/dashboard":"vendor"===a.role&&(i="/vendor/dashboard"),p(i,{replace:!0})}catch(a){d((e=>({...e,password:""}))),m(a.message||"Login failed. Please try again.")}finally{u(!1)}},children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",name:"email",className:"input",placeholder:"Enter your email",value:l.email,onChange:w,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",name:"password",className:"input",placeholder:"Enter your password",value:l.password,onChange:w,required:!0})]}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Login"})]}),a.jsxs("p",{className:"login-page-text",children:["Don't have an account? ",a.jsx(t,{to:"/register",children:"Register here"})]})]})})}export{l as default};
