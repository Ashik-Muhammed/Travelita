import{j as e,a as s,c as a,d as r,g as t,s as n,e as o}from"./index-CTnmfCPK.js";import{r as i,u as l,a as c,L as d}from"./router-CbvfO1vz.js";import{F as m,a as h,e as u,f as x,g as p}from"./index-DOWsMtyp.js";/* empty css                    */import"./react-CMmhtoO5.js";import"./iconBase-YQ9d7kAD.js";const j=()=>{const[j,g]=i.useState({email:"",password:""}),[f,v]=i.useState(!1),[w,N]=i.useState(""),y=l();c();const[b,k]=i.useState(!1);i.useEffect((()=>{(async()=>{try{const e=s.currentUser,n=localStorage.getItem("vendorInfo");if(e&&n){JSON.parse(n);const s=a(r,`vendors/${e.uid}`);if((await t(s)).exists())return void y("/vendor/dashboard")}}catch(e){localStorage.removeItem("vendorInfo")}})()}),[y]);const S=e=>{g({...j,[e.target.name]:e.target.value})};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h2",{children:"Vendor Login"}),e.jsx("p",{children:"Sign in to manage your tours and bookings"})]}),e.jsxs("div",{className:"auth-body",children:[w&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:w})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),v(!0),N(null);try{const e=(await n(s,j.email,j.password)).user,i=a(r,`vendors/${e.uid}`),l=await t(i);if(!l.exists())return N("This account is not registered as a vendor. Please use the customer login."),await o(s),void v(!1);const c=l.val();localStorage.setItem("vendorInfo",JSON.stringify(c)),y("/vendor/dashboard")}catch(i){let e="Failed to login. Please check your credentials.";if(i.code)switch(i.code){case"auth/user-not-found":e="Account not found. Please check your email or register if you're new.",setTimeout((()=>{confirm("Would you like to register as a new vendor instead?")&&y("/vendor/register")}),1e3);break;case"auth/wrong-password":e="Invalid password. Please try again.";break;case"auth/invalid-email":e="Invalid email format. Please check and try again.";break;case"auth/too-many-requests":e="Too many failed login attempts. Please try again later or reset your password.";break;case"auth/network-request-failed":e="Network error. Please check your internet connection and try again.";break;default:e=`Login failed: ${i.message}`}N(e)}finally{v(!1)}},className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(m,{className:"h-5 w-5"})}),e.jsx("input",{type:"email",name:"email",value:j.email,onChange:S,className:"form-control",placeholder:"Enter your email",required:!0,disabled:f})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx(d,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(h,{className:"h-5 w-5"})}),e.jsx("input",{type:b?"text":"password",name:"password",value:j.password,onChange:S,className:"form-control",placeholder:"••••••••",required:!0,disabled:f}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>k(!b),"aria-label":b?"Hide password":"Show password",children:b?e.jsx(u,{className:"h-5 w-5"}):e.jsx(x,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"form-group",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Sign In"}),e.jsx(p,{className:"h-4 w-4"})]})})})]}),e.jsx("div",{className:"auth-divider",children:e.jsx("span",{children:"OR"})}),e.jsxs("div",{className:"auth-footer",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(d,{to:"/vendor/register",className:"font-medium text-primary hover:underline",children:"Create account"})]}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:e.jsx(d,{to:"/login",className:"font-medium text-primary hover:underline",children:"← Back to user login"})})]})]})]})})};export{j as default};
