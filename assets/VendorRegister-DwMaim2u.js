import{j as e,e as s,a,f as r,b as t,c as l}from"./index-CGBRwBly.js";import{r as n,u as i,L as o}from"./router-CbvfO1vz.js";import{c,F as d,a as m,e as h,f as u,g as p,h as x,i as j,j as w}from"./index-Crxxp2-0.js";/* empty css                    */import"./react-CMmhtoO5.js";import"./iconBase-YQ9d7kAD.js";const N=()=>{const[N,g]=n.useState({name:"",email:"",password:"",confirmPassword:"",companyName:"",phone:"",address:""}),[f,b]=n.useState(!1),[v,y]=n.useState(""),[k,P]=n.useState(!1),[S,C]=n.useState(!1),[A,q]=n.useState(!1),[B,L]=n.useState(1),I=i(),D=()=>{L(1),y("")},F=e=>{g({...N,[e.target.name]:e.target.value})},M=async e=>{if(e.preventDefault(),N.name&&N.email&&N.password&&N.confirmPassword?N.password!==N.confirmPassword?(y("Passwords do not match"),0):N.password.length<6?(y("Password must be at least 6 characters"),0):N.companyName&&N.phone&&N.address||(y("All business details are required"),0):(y("All fields are required"),0)){b(!0),y(""),P(!1);try{const{confirmPassword:e,...n}=N,i=(await s(a,N.email,N.password)).user,o={name:N.name.trim(),email:N.email.trim().toLowerCase(),companyName:N.companyName.trim(),phone:N.phone.trim(),address:N.address.trim(),role:"vendor",status:"pending",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};await r(t(l,`vendors/${i.uid}`),o),await r(t(l,`users/${i.uid}`),{email:N.email.trim().toLowerCase(),name:N.name.trim(),role:"vendor",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),localStorage.setItem("vendorInfo",JSON.stringify(o)),P(!0),setTimeout((()=>{I("/vendor/dashboard")}),1500)}catch(n){let e="Registration failed. Please try again.";switch(n.code){case"auth/email-already-in-use":e="This email is already registered. Please use a different email or login.";break;case"auth/invalid-email":e="Please enter a valid email address.";break;case"auth/weak-password":e="Password should be at least 6 characters long.";break;case"auth/operation-not-allowed":e="Registration is currently disabled. Please contact support.";break;default:e="An error occurred during registration. Please try again."}if(y(e),n.code)switch(n.code){case"auth/email-already-in-use":e="This email is already registered. Please use a different email or try logging in.",setTimeout((()=>{confirm("Would you like to go to the login page instead?")&&I("/vendor/login")}),1e3);break;case"auth/invalid-email":e="Invalid email address. Please check and try again.";break;case"auth/weak-password":e="Password is too weak. Please use a stronger password.";break;case"auth/network-request-failed":e="Network error. Please check your internet connection and try again.";break;default:e=`Registration failed: ${n.message}`}y(e)}finally{b(!1)}}};return k?e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card text-center",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{children:"Registration Successful!"}),e.jsx("p",{children:"Your vendor account has been created successfully."})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"We're setting up your account. You'll be redirected to the dashboard shortly..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full animate-pulse",style:{width:"75%"}})})]})]})}):e.jsx("div",{className:"auth-container",children:e.jsx("div",{className:"auth-card",style:{maxWidth:"28rem"},children:1===B?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h2",{children:"Create Vendor Account"}),e.jsx("p",{children:"Step 1 of 2: Enter your account information"})]}),e.jsxs("div",{className:"auth-body",children:[v&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:v})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),N.name&&N.email&&N.password&&N.confirmPassword?N.password===N.confirmPassword?N.password.length<6?y("Password must be at least 6 characters"):(L(2),y("")):y("Passwords do not match"):y("Please fill in all account information")},className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Full Name"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(c,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",name:"name",value:N.name,onChange:F,className:"form-control",placeholder:"Your full name",required:!0,disabled:f})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(d,{className:"h-5 w-5"})}),e.jsx("input",{type:"email",name:"email",value:N.email,onChange:F,className:"form-control",placeholder:"your.email@example.com",required:!0,disabled:f})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(m,{className:"h-5 w-5"})}),e.jsx("input",{type:S?"text":"password",name:"password",value:N.password,onChange:F,className:"form-control",placeholder:"••••••••",required:!0,disabled:f}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>C(!S),"aria-label":S?"Hide password":"Show password",children:S?e.jsx(h,{className:"h-5 w-5"}):e.jsx(u,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 6 characters"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Confirm Password"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(m,{className:"h-5 w-5"})}),e.jsx("input",{type:A?"text":"password",name:"confirmPassword",value:N.confirmPassword,onChange:F,className:"form-control",placeholder:"••••••••",required:!0,disabled:f}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>q(!A),"aria-label":A?"Hide password":"Show password",children:A?e.jsx(h,{className:"h-5 w-5"}):e.jsx(u,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"form-group mt-6",children:e.jsxs("button",{type:"submit",className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:f,children:[e.jsx("span",{children:"Next: Business Details"}),e.jsx(p,{className:"h-4 w-4"})]})})]}),e.jsxs("div",{className:"auth-footer",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(o,{to:"/vendor/login",className:"font-medium text-primary hover:underline",children:"Sign in"})]}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:e.jsx(o,{to:"/register",className:"font-medium text-primary hover:underline",children:"← Back to user registration"})})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h2",{children:"Business Information"}),e.jsx("p",{children:"Step 2 of 2: Tell us about your business"})]}),e.jsxs("div",{className:"auth-body",children:[v&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:v})]}),e.jsxs("form",{onSubmit:M,className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Company Name"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(x,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",name:"companyName",value:N.companyName,onChange:F,className:"form-control",placeholder:"Your company or business name",required:!0,disabled:f})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Phone Number"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(j,{className:"h-5 w-5"})}),e.jsx("input",{type:"tel",name:"phone",value:N.phone,onChange:F,className:"form-control",placeholder:"+1 (123) 456-7890",required:!0,disabled:f})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Business Address"}),e.jsxs("div",{className:"textarea-with-icon",children:[e.jsx("span",{className:"input-icon",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsx("textarea",{name:"address",value:N.address,onChange:F,className:"form-control",placeholder:"Full business address",required:!0,disabled:f,rows:"3"})]})]}),e.jsxs("div",{className:"button-group mt-8",children:[e.jsx("button",{type:"submit",className:"btn btn-primary flex items-center justify-center gap-2",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Create Account"}),e.jsx(p,{className:"h-4 w-4"})]})}),e.jsx("button",{type:"button",onClick:D,className:"btn btn-outline",disabled:f,children:"← Back to Account Info"})]})]})]})]})})})};export{N as default};
