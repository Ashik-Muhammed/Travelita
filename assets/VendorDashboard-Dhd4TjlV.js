import{a as e,c as a,d as t,q as n,o as s,k as i,g as r,j as o,w as l,v as c,C as d,D as u,E as h,F as m,G as g,p,h as f,H as v,e as x}from"./index-CTnmfCPK.js";import{r as b,L as j,b as w,u as y}from"./router-CbvfO1vz.js";import{k as N,t as k,u as P,c as S,l as C,p as M,r as D,v as F,w as E}from"./index-DOWsMtyp.js";import{p as T,D as W,o as I,B as q,E as A}from"./index-BlVSXUfo.js";import"./react-CMmhtoO5.js";import"./iconBase-YQ9d7kAD.js";const L=()=>{const[d,u]=b.useState([]),[h,m]=b.useState(!0),[g,p]=b.useState(null),[f,v]=b.useState({show:!1,packageId:null});b.useEffect((()=>{x()}),[]);const x=async()=>{try{m(!0),p(null);const o=e.currentUser;if(!o)return p("Authentication required"),void m(!1);const l=a(t,"tourPackages"),c=n(l,s("vendorId"),i(o.uid)),d=await r(c);if(!d.exists())return u([]),void m(!1);const h=[];d.forEach((e=>{h.push({id:e.key,...e.val()})})),u(h)}catch(o){p("Failed to fetch packages. Please try again.")}finally{m(!1)}};return h?o.jsxs("div",{className:"packages-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading packages..."})]}):g?o.jsxs("div",{className:"packages-error",children:[o.jsx(N,{className:"error-icon"}),o.jsx("p",{children:g})]}):0===d.length?o.jsxs("div",{className:"no-packages",children:[o.jsx(k,{className:"empty-icon"}),o.jsx("p",{children:"You haven't added any tour packages yet."}),o.jsx(j,{to:"/vendor/add-package",className:"add-package-button",children:"Add Your First Package"})]}):o.jsxs("div",{className:"vendor-packages",children:[o.jsxs("div",{className:"packages-header",children:[o.jsx("h2",{children:"Your Tour Packages"}),o.jsx("p",{children:"Manage your tour packages and view their performance"})]}),o.jsx("div",{className:"packages-grid",children:d.map((n=>o.jsxs("div",{className:"package-card",children:[o.jsxs("div",{className:"package-image",children:[o.jsx("img",{src:n.images&&n.images.length>0?n.images[0]:"https://source.unsplash.com/random/600x400/?travel,"+Math.random(),alt:n.title,loading:"lazy",onError:e=>{e.target.onerror=null,e.target.src="https://source.unsplash.com/random/600x400/?vacation"}}),o.jsx("span",{className:"package-status "+(n.available?"active":"inactive"),children:n.available?"Active":"Inactive"}),o.jsxs("div",{className:"package-rating",children:[o.jsx("span",{className:"stars",children:"★★★★★"}),o.jsx("span",{className:"rating-number",children:"4.8"})]})]}),o.jsxs("div",{className:"package-content",children:[o.jsx("h3",{children:n.title}),o.jsxs("p",{className:"package-destination",children:[o.jsx(P,{})," ",n.destination," • ",n.duration]}),o.jsxs("p",{className:"package-price",children:["₹",n.price?n.price.toLocaleString("en-IN"):"0"," ",o.jsx("span",{className:"per-person",children:"/ person"})]}),o.jsxs("div",{className:"package-features",children:[o.jsxs("span",{children:[o.jsx(S,{})," ",n.maxGroupSize||"12"," People"]}),o.jsxs("span",{children:[o.jsx(C,{})," ",n.duration||"7 Days"]})]}),o.jsxs("div",{className:"package-actions",children:[o.jsx("button",{className:"status-toggle "+(n.available?"deactivate":"activate"),onClick:()=>(async(n,s)=>{try{if(!e.currentUser)return;const i=a(t,`tourPackages/${n}`);await l(i,{available:!s}),u(d.map((e=>e.id===n?{...e,available:!s}:e)))}catch(i){alert("Failed to update package status")}})(n.id,n.available),children:n.available?"Deactivate":"Activate"}),o.jsxs(j,{to:`/packages/${n.id}`,className:"view-button",children:[o.jsx(k,{})," View"]}),o.jsxs(j,{to:`/vendor/edit-package/${n.id}`,className:"edit-button",children:[o.jsx(M,{})," Edit"]}),o.jsxs("button",{className:"delete-button",onClick:()=>v({show:!0,packageId:n.id}),children:[o.jsx(D,{})," Delete"]})]})]})]},n.id)))}),f.show&&o.jsx("div",{className:"delete-modal",children:o.jsxs("div",{className:"modal-content",children:[o.jsx("div",{className:"modal-icon",children:o.jsx(N,{})}),o.jsx("h3",{children:"Delete Package"}),o.jsx("p",{children:"Are you sure you want to delete this package? This action cannot be undone and all package data will be permanently removed."}),o.jsxs("div",{className:"modal-actions",children:[o.jsxs("button",{className:"cancel-button",onClick:()=>v({show:!1,packageId:null}),children:[o.jsx(D,{})," Cancel"]}),o.jsxs("button",{className:"confirm-button",onClick:async()=>{if(f.packageId)try{if(!e.currentUser)return;const n=a(t,`tourPackages/${f.packageId}`);await c(n),u(d.filter((e=>e.id!==f.packageId))),v({show:!1,packageId:null})}catch(n){alert("Failed to delete package")}},children:[o.jsx(F,{})," Delete Package"]})]})]})})]})},O=6048e5,Y=Symbol.for("constructDateFrom");function $(e,a){return"function"==typeof e?e(a):e&&"object"==typeof e&&Y in e?e[Y](a):e instanceof Date?new e.constructor(a):new Date(a)}function U(e,a){return $(a||e,e)}let H={};function B(){return H}function z(e,a){var t,n,s,i;const r=B(),o=(null==a?void 0:a.weekStartsOn)??(null==(n=null==(t=null==a?void 0:a.locale)?void 0:t.options)?void 0:n.weekStartsOn)??r.weekStartsOn??(null==(i=null==(s=r.locale)?void 0:s.options)?void 0:i.weekStartsOn)??0,l=U(e,null==a?void 0:a.in),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function R(e,a){return z(e,{...a,weekStartsOn:1})}function G(e,a){const t=U(e,null==a?void 0:a.in),n=t.getFullYear(),s=$(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=R(s),r=$(t,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const o=R(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function J(e){const a=U(e),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+e-+t}function Q(e,a){const t=U(e,null==a?void 0:a.in);return t.setHours(0,0,0,0),t}function X(e,a,t){const[n,s]=function(e,...a){const t=$.bind(null,a.find((e=>"object"==typeof e)));return a.map(t)}(null==t||t.in,e,a),i=Q(n),r=Q(s),o=+i-J(i),l=+r-J(r);return Math.round((o-l)/864e5)}function V(e){return!(!((a=e)instanceof Date||"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a))&&"number"!=typeof e||isNaN(+U(e)));var a}const K={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Z(e){return(a={})=>{const t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const _={date:Z({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Z({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Z({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ae(e){return(a,t)=>{let n;if("formatting"===((null==t?void 0:t.context)?String(t.context):"standalone")&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,s=(null==t?void 0:t.width)?String(t.width):a;n=e.formattingValues[s]||e.formattingValues[a]}else{const a=e.defaultWidth,s=(null==t?void 0:t.width)?String(t.width):e.defaultWidth;n=e.values[s]||e.values[a]}return n[e.argumentCallback?e.argumentCallback(a):a]}}function te(e){return(a,t={})=>{const n=t.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=a.match(s);if(!i)return null;const r=i[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t;return}(o,(e=>e.test(r))):function(e,a){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t;return}(o,(e=>e.test(r)));let c;c=e.valueCallback?e.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;return{value:c,rest:a.slice(r.length)}}}var ne;const se={code:"en-US",formatDistance:(e,a,t)=>{let n;const s=K[e];return n="string"==typeof s?s:1===a?s.one:s.other.replace("{{count}}",a.toString()),(null==t?void 0:t.addSuffix)?t.comparison&&t.comparison>0?"in "+n:n+" ago":n},formatLong:_,formatRelative:(e,a,t,n)=>ee[e],localize:{ordinalNumber:(e,a)=>{const t=Number(e),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:ae({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ae({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ae({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ae({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ae({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ne={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,a={})=>{const t=e.match(ne.matchPattern);if(!t)return null;const n=t[0],s=e.match(ne.parsePattern);if(!s)return null;let i=ne.valueCallback?ne.valueCallback(s[0]):s[0];return i=a.valueCallback?a.valueCallback(i):i,{value:i,rest:e.slice(n.length)}}),era:te({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:te({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:te({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:te({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:te({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ie(e,a){const t=U(e,null==a?void 0:a.in),n=X(t,function(e,a){const t=U(e,null==a?void 0:a.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}(t));return n+1}function re(e,a){const t=U(e,null==a?void 0:a.in),n=+R(t)-+function(e,a){const t=G(e,a),n=$(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),R(n)}(t);return Math.round(n/O)+1}function oe(e,a){var t,n,s,i;const r=U(e,null==a?void 0:a.in),o=r.getFullYear(),l=B(),c=(null==a?void 0:a.firstWeekContainsDate)??(null==(n=null==(t=null==a?void 0:a.locale)?void 0:t.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(i=null==(s=l.locale)?void 0:s.options)?void 0:i.firstWeekContainsDate)??1,d=$((null==a?void 0:a.in)||e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=z(d,a),h=$((null==a?void 0:a.in)||e,0);h.setFullYear(o,0,c),h.setHours(0,0,0,0);const m=z(h,a);return+r>=+u?o+1:+r>=+m?o:o-1}function le(e,a){const t=U(e,null==a?void 0:a.in),n=+z(t,a)-+function(e,a){var t,n,s,i;const r=B(),o=(null==a?void 0:a.firstWeekContainsDate)??(null==(n=null==(t=null==a?void 0:a.locale)?void 0:t.options)?void 0:n.firstWeekContainsDate)??r.firstWeekContainsDate??(null==(i=null==(s=r.locale)?void 0:s.options)?void 0:i.firstWeekContainsDate)??1,l=oe(e,a),c=$((null==a?void 0:a.in)||e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),z(c,a)}(t,a);return Math.round(n/O)+1}function ce(e,a){return(e<0?"-":"")+Math.abs(e).toString().padStart(a,"0")}const de={y(e,a){const t=e.getFullYear(),n=t>0?t:1-t;return ce("yy"===a?n%100:n,a.length)},M(e,a){const t=e.getMonth();return"M"===a?String(t+1):ce(t+1,2)},d:(e,a)=>ce(e.getDate(),a.length),a(e,a){const t=e.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];default:return"am"===t?"a.m.":"p.m."}},h:(e,a)=>ce(e.getHours()%12||12,a.length),H:(e,a)=>ce(e.getHours(),a.length),m:(e,a)=>ce(e.getMinutes(),a.length),s:(e,a)=>ce(e.getSeconds(),a.length),S(e,a){const t=a.length,n=e.getMilliseconds();return ce(Math.trunc(n*Math.pow(10,t-3)),a.length)}},ue="midnight",he="noon",me="morning",ge="afternoon",pe="evening",fe="night",ve={G:function(e,a,t){const n=e.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});default:return t.era(n,{width:"wide"})}},y:function(e,a,t){if("yo"===a){const a=e.getFullYear(),n=a>0?a:1-a;return t.ordinalNumber(n,{unit:"year"})}return de.y(e,a)},Y:function(e,a,t,n){const s=oe(e,n),i=s>0?s:1-s;if("YY"===a){return ce(i%100,2)}return"Yo"===a?t.ordinalNumber(i,{unit:"year"}):ce(i,a.length)},R:function(e,a){return ce(G(e),a.length)},u:function(e,a){return ce(e.getFullYear(),a.length)},Q:function(e,a,t){const n=Math.ceil((e.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return ce(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,a,t){const n=Math.ceil((e.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return ce(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,a,t){const n=e.getMonth();switch(a){case"M":case"MM":return de.M(e,a);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(e,a,t){const n=e.getMonth();switch(a){case"L":return String(n+1);case"LL":return ce(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(e,a,t,n){const s=le(e,n);return"wo"===a?t.ordinalNumber(s,{unit:"week"}):ce(s,a.length)},I:function(e,a,t){const n=re(e);return"Io"===a?t.ordinalNumber(n,{unit:"week"}):ce(n,a.length)},d:function(e,a,t){return"do"===a?t.ordinalNumber(e.getDate(),{unit:"date"}):de.d(e,a)},D:function(e,a,t){const n=ie(e);return"Do"===a?t.ordinalNumber(n,{unit:"dayOfYear"}):ce(n,a.length)},E:function(e,a,t){const n=e.getDay();switch(a){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(e,a,t,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(i);case"ee":return ce(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,a,t,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(i);case"cc":return ce(i,a.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,a,t){const n=e.getDay(),s=0===n?7:n;switch(a){case"i":return String(s);case"ii":return ce(s,a.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(e,a,t){const n=e.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,a,t){const n=e.getHours();let s;switch(s=12===n?he:0===n?ue:n/12>=1?"pm":"am",a){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,a,t){const n=e.getHours();let s;switch(s=n>=17?pe:n>=12?ge:n>=4?me:fe,a){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,a,t){if("ho"===a){let a=e.getHours()%12;return 0===a&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return de.h(e,a)},H:function(e,a,t){return"Ho"===a?t.ordinalNumber(e.getHours(),{unit:"hour"}):de.H(e,a)},K:function(e,a,t){const n=e.getHours()%12;return"Ko"===a?t.ordinalNumber(n,{unit:"hour"}):ce(n,a.length)},k:function(e,a,t){let n=e.getHours();return 0===n&&(n=24),"ko"===a?t.ordinalNumber(n,{unit:"hour"}):ce(n,a.length)},m:function(e,a,t){return"mo"===a?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):de.m(e,a)},s:function(e,a,t){return"so"===a?t.ordinalNumber(e.getSeconds(),{unit:"second"}):de.s(e,a)},S:function(e,a){return de.S(e,a)},X:function(e,a,t){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(a){case"X":return be(n);case"XXXX":case"XX":return je(n);default:return je(n,":")}},x:function(e,a,t){const n=e.getTimezoneOffset();switch(a){case"x":return be(n);case"xxxx":case"xx":return je(n);default:return je(n,":")}},O:function(e,a,t){const n=e.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+xe(n,":");default:return"GMT"+je(n,":")}},z:function(e,a,t){const n=e.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+xe(n,":");default:return"GMT"+je(n,":")}},t:function(e,a,t){return ce(Math.trunc(+e/1e3),a.length)},T:function(e,a,t){return ce(+e,a.length)}};function xe(e,a=""){const t=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return 0===i?t+String(s):t+String(s)+a+ce(i,2)}function be(e,a){if(e%60==0){return(e>0?"-":"+")+ce(Math.abs(e)/60,2)}return je(e,a)}function je(e,a=""){const t=e>0?"-":"+",n=Math.abs(e);return t+ce(Math.trunc(n/60),2)+a+ce(n%60,2)}const we=(e,a)=>{switch(e){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},ye=(e,a)=>{switch(e){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},Ne={p:ye,P:(e,a)=>{const t=e.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return we(e,a);let i;switch(n){case"P":i=a.dateTime({width:"short"});break;case"PP":i=a.dateTime({width:"medium"});break;case"PPP":i=a.dateTime({width:"long"});break;default:i=a.dateTime({width:"full"})}return i.replace("{{date}}",we(n,a)).replace("{{time}}",ye(s,a))}},ke=/^D+$/,Pe=/^Y+$/,Se=["D","DD","YY","YYYY"];const Ce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Me=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,De=/^'([^]*?)'?$/,Fe=/''/g,Ee=/[a-zA-Z]/;function Te(e,a,t){var n,s,i,r;const o=B(),l=o.locale??se,c=o.firstWeekContainsDate??(null==(s=null==(n=o.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??1,d=o.weekStartsOn??(null==(r=null==(i=o.locale)?void 0:i.options)?void 0:r.weekStartsOn)??0,u=U(e,null==t?void 0:t.in);if(!V(u))throw new RangeError("Invalid time value");let h=a.match(Me).map((e=>{const a=e[0];if("p"===a||"P"===a){return(0,Ne[a])(e,l.formatLong)}return e})).join("").match(Ce).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const a=e[0];if("'"===a)return{isToken:!1,value:We(e)};if(ve[a])return{isToken:!0,value:e};if(a.match(Ee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return{isToken:!1,value:e}}));l.localize.preprocessor&&(h=l.localize.preprocessor(u,h));const m={firstWeekContainsDate:c,weekStartsOn:d,locale:l};return h.map((t=>{if(!t.isToken)return t.value;const n=t.value;(function(e){return Pe.test(e)}(n)||function(e){return ke.test(e)}(n))&&function(e,a,t){const n=function(e,a,t){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${a}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,a,t);if(Se.includes(e))throw new RangeError(n)}(n,a,String(e));return(0,ve[n[0]])(u,n,l.localize,m)})).join("")}function We(e){const a=e.match(De);return a?a[1].replace(Fe,"'"):e}const Ie=()=>{const[c,u]=b.useState([]),[h,m]=b.useState(!0),[g,p]=b.useState(null),[f,v]=b.useState("all"),[x,j]=b.useState({}),[w,y]=b.useState(!1);b.useEffect((()=>{N()}),[]);const N=async()=>{try{m(!0),p(null);const o=e.currentUser;if(!o)return p("Authentication required"),void m(!1);const l=n(a(t,"tourPackages"),s("vendorId"),i(o.uid)),c=await r(l);if(!c.exists())return u([]),void m(!1);const d=[];if(c.forEach((e=>{d.push(e.key)})),0===d.length)return u([]),void m(!1);const h=a(t,"bookings"),g=await r(h);if(!g.exists())return u([]),void m(!1);const f=[];g.forEach((e=>{const a={id:e.key,...e.val()};d.includes(a.packageId)&&f.push(a)})),u(f);const v=[...new Set(f.map((e=>e.packageId)))];await k(v)}catch(o){p("Failed to fetch bookings. Please try again.")}finally{m(!1)}},k=async e=>{try{const n={};for(const s of e){const e=a(t,`tourPackages/${s}`),i=await r(e);i.exists()?n[s]=i.val().title:n[s]="Unknown Package"}j(n)}catch(n){}},P=e=>{switch(e){case"confirmed":return"confirmed";case"completed":return"completed";case"cancelled":return"cancelled";default:return"pending"}},S="all"===f?c:c.filter((e=>(e.status||"pending")===f)),C=e=>{try{return Te(new Date(e),"MMM d, yyyy")}catch(a){return"Invalid date"}};return h?o.jsxs("div",{className:"bookings-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Loading bookings..."})]}):g?o.jsx("div",{className:"bookings-error",children:g}):o.jsxs("div",{className:"vendor-bookings",children:[o.jsxs("div",{className:"bookings-header",children:[o.jsx("h2",{children:"Manage Bookings"}),o.jsx("p",{children:"View and manage all your tour package bookings in one place"})]}),o.jsxs("div",{className:"booking-filters",children:[o.jsxs("button",{className:"filter-button "+("all"===f?"active":""),onClick:()=>v("all"),children:["All ",o.jsx("span",{className:"count",children:c.length})]}),o.jsxs("button",{className:"filter-button "+("pending"===f?"active":""),onClick:()=>v("pending"),children:["Pending ",o.jsx("span",{className:"count",children:c.filter((e=>"pending"===(e.status||"pending"))).length})]}),o.jsxs("button",{className:"filter-button "+("confirmed"===f?"active":""),onClick:()=>v("confirmed"),children:["Confirmed ",o.jsx("span",{className:"count",children:c.filter((e=>"confirmed"===e.status)).length})]}),o.jsxs("button",{className:"filter-button "+("completed"===f?"active":""),onClick:()=>v("completed"),children:["Completed ",o.jsx("span",{className:"count",children:c.filter((e=>"completed"===e.status)).length})]}),o.jsxs("button",{className:"filter-button "+("cancelled"===f?"active":""),onClick:()=>v("cancelled"),children:["Cancelled ",o.jsx("span",{className:"count",children:c.filter((e=>"cancelled"===e.status)).length})]})]}),h?o.jsxs("div",{className:"bookings-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading your bookings..."})]}):g?o.jsxs("div",{className:"bookings-error",children:[o.jsx("p",{children:g}),o.jsx("button",{className:"retry-button",onClick:N,children:"Retry"})]}):0===S.length?o.jsxs("div",{className:"no-bookings",children:[o.jsxs("p",{children:["No ","all"===f?"":f+" ","bookings found"]}),"all"!==f&&o.jsx("button",{className:"view-all-button",onClick:()=>v("all"),children:"View all bookings"})]}):o.jsx("div",{className:"bookings-grid",children:S.map((n=>o.jsxs("div",{className:"booking-card",children:[o.jsxs("div",{className:"booking-card-header",children:[o.jsx("h3",{children:x[n.packageId]||"Package"}),o.jsx("span",{className:`status-badge ${P(n.status||"pending")}`,children:n.status||"pending"})]}),o.jsxs("div",{className:"booking-card-body",children:[o.jsxs("div",{className:"booking-details",children:[o.jsxs("div",{className:"booking-detail",children:[o.jsx(T,{}),o.jsxs("div",{className:"booking-detail-content",children:[o.jsx("h4",{children:"Travel Date"}),o.jsx("p",{children:C(n.travelDate)})]})]}),o.jsxs("div",{className:"booking-detail",children:[o.jsx(W,{}),o.jsxs("div",{className:"booking-detail-content",children:[o.jsx("h4",{children:"Travelers"}),o.jsxs("p",{children:[n.travelers||1," ",1===n.travelers?"Person":"People"]})]})]}),o.jsxs("div",{className:"booking-detail",children:[o.jsx(I,{}),o.jsxs("div",{className:"booking-detail-content",children:[o.jsx("h4",{children:"Customer"}),o.jsx("p",{children:n.customerName||"Guest User"})]})]}),o.jsxs("div",{className:"booking-detail",children:[o.jsx(q,{}),o.jsxs("div",{className:"booking-detail-content",children:[o.jsx("h4",{children:"Location"}),o.jsx("p",{children:n.pickupLocation||"Not specified"})]})]}),n.totalPrice&&o.jsxs("div",{className:"booking-detail",children:[o.jsx(A,{}),o.jsxs("div",{className:"booking-detail-content",children:[o.jsx("h4",{children:"Total Amount"}),o.jsxs("p",{children:["₹",n.totalPrice.toLocaleString()]})]})]})]}),o.jsxs("div",{className:"booking-actions",children:["pending"===n.status&&o.jsx("button",{onClick:()=>(async n=>{if(window.confirm("Are you sure you want to confirm this booking? This action cannot be undone."))try{m(!0);const s=e.currentUser;if(!s)throw new Error("You must be logged in to confirm bookings");const i=a(t,`bookings/${n}`),o=await r(i);if(!o.exists())throw new Error("Booking not found");const c=o.val(),u=a(t,`tourPackages/${c.packageId}`),h=await r(u);if(!h.exists())throw new Error("Package not found");if(h.val().vendorId!==s.uid)throw new Error("Only the package owner can confirm this booking");await l(i,{status:"confirmed",confirmedAt:d(),confirmedBy:"vendor",confirmedById:s.uid,updatedAt:d()}),await N(),alert("Booking confirmed successfully!")}catch(s){alert(s.message||"Failed to confirm booking. Please try again.")}finally{m(!1)}})(n.id),className:"btn-confirm",disabled:h,children:h?"Confirming...":"Confirm Booking"}),o.jsx("button",{onClick:()=>(async(n,s)=>{try{if(!e.currentUser)return;const i=a(t,`bookings/${n}`);await l(i,{status:s,updatedAt:Date.now()}),u(c.map((e=>e.id===n?{...e,status:s}:e)))}catch(i){alert("Failed to update booking status")}})(n.id,"cancelled"===n.status?"pending":"cancelled"),className:"btn-cancel "+("cancelled"===n.status?"cancelled":""),disabled:h,children:"cancelled"===n.status?"Cancelled":"Cancel Booking"})]})]})]},n.id)))})]})},qe=({vendorInfo:e})=>{const[n,s]=b.useState({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",companyName:(null==e?void 0:e.companyName)||"",phone:(null==e?void 0:e.phone)||"",address:(null==e?void 0:e.address)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[i,r]=b.useState(!1),[c,d]=b.useState(!1),[p,f]=b.useState(null),[v,x]=b.useState(null),[j,w]=b.useState(!1),[y,N]=b.useState((null==e?void 0:e.photoURL)||""),[k,P]=b.useState(!1),S=b.useRef(null),C=e=>{s({...n,[e.target.name]:e.target.value})};return o.jsxs("div",{className:"vendor-profile",children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("div",{className:"profile-photo-container",children:o.jsxs("div",{className:"profile-photo",children:[y?o.jsx("img",{src:y,alt:"Profile"}):o.jsx("div",{className:"profile-photo-placeholder",children:n.name?n.name.charAt(0).toUpperCase():"U"}),i&&o.jsxs("div",{className:"photo-actions",children:[o.jsx("button",{type:"button",className:"upload-btn",onClick:()=>S.current.click(),disabled:k,children:k?"Uploading...":o.jsxs(o.Fragment,{children:[o.jsx(E,{})," Change Photo"]})}),y&&o.jsxs("button",{type:"button",className:"remove-btn",onClick:async()=>{try{if(P(!0),N(""),i&&e.uid){const n=a(t,`users/${e.uid}`);await l(n,{photoURL:""});const s=JSON.parse(localStorage.getItem("user"));s&&(s.photoURL="",localStorage.setItem("user",JSON.stringify(s)))}}catch(n){f("Failed to remove photo. Please try again.")}finally{P(!1)}},disabled:k,children:[o.jsx(D,{})," Remove"]}),o.jsx("input",{type:"file",ref:S,onChange:async n=>{const s=n.target.files[0];if(s)try{P(!0),f(null);const n=u(h,`profile_photos/${e.uid||"temp"}_${Date.now()}`),r=await m(n,s),o=await g(r.ref);if(N(o),i){const n=a(t,`users/${e.uid}`);await l(n,{photoURL:o});const s=JSON.parse(localStorage.getItem("user"));s&&(s.photoURL=o,localStorage.setItem("user",JSON.stringify(s)))}}catch(r){f("Failed to upload photo. Please try again.")}finally{P(!1)}},accept:"image/*",style:{display:"none"}})]})]})}),o.jsx("h2",{children:"Profile Information"})]}),p&&o.jsx("div",{className:"profile-error",children:p}),v&&o.jsx("div",{className:"profile-success",children:v}),o.jsxs("form",{onSubmit:async i=>{var o,c;i.preventDefault(),d(!0),f(null),x(null);try{const i=JSON.parse(localStorage.getItem("user"));if(!i||!i.uid)return f("Authentication required"),void d(!1);const o={name:n.name,companyName:n.companyName,phone:n.phone,address:n.address,updatedAt:Date.now()},c=a(t,`users/${i.uid}`);y&&y!==(null==e?void 0:e.photoURL)&&(o.photoURL=y),await l(c,o),x("Profile updated successfully");const u={...i,...o};localStorage.setItem("user",JSON.stringify(u)),j&&(s({...n,currentPassword:"",newPassword:"",confirmPassword:""}),w(!1)),r(!1)}catch(u){f((null==(c=null==(o=u.response)?void 0:o.data)?void 0:c.message)||"Failed to update profile. Please try again.")}finally{d(!1)}},className:"profile-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"name",children:"Full Name"}),o.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:C,disabled:!i,required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,disabled:!0,required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"companyName",children:"Company Name"}),o.jsx("input",{type:"text",id:"companyName",name:"companyName",value:n.companyName,onChange:C,disabled:!i,required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"phone",children:"Phone Number"}),o.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:C,disabled:!i})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"address",children:"Business Address"}),o.jsx("textarea",{id:"address",name:"address",value:n.address,onChange:C,rows:"3",disabled:!i})]}),i&&j&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{children:"Change Password"}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),o.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:n.currentPassword,onChange:C})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"newPassword",children:"New Password"}),o.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:n.newPassword,onChange:C,minLength:"6"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:C,minLength:"6"})]})]}),o.jsx("div",{className:"profile-actions",children:i?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"submit",className:"save-button",disabled:c,children:c?"Saving...":"Save Changes"}),o.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{r(!1),w(!1),s({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",companyName:(null==e?void 0:e.companyName)||"",phone:(null==e?void 0:e.phone)||"",address:(null==e?void 0:e.address)||"",currentPassword:"",newPassword:"",confirmPassword:""})},children:"Cancel"}),!j&&o.jsx("button",{type:"button",className:"password-button",onClick:()=>w(!0),children:"Change Password"})]}):o.jsx(o.Fragment,{children:o.jsx("button",{type:"button",className:"edit-button",onClick:()=>r(!0),children:"Edit Profile"})})})]})]})},Ae=({onSuccess:n,isEditing:s=!1,packageData:i=null})=>{const{packageId:c}=w(),d=y(),[u,h]=b.useState({title:"",description:"",destination:"",duration:"",price:"",included:["","",""],available:!0,featured:!1}),[m,g]=b.useState([{title:"Day 1",description:""}]),[v,x]=b.useState([]),[j,N]=b.useState(!!s),[k,P]=b.useState(!1),[S,C]=b.useState(null),[M,D]=b.useState(null),[F,E]=b.useState([]);b.useEffect((()=>{s&&c?T():i&&W(i)}),[s,c,i]);const T=async()=>{try{N(!0),C(null);const e=a(t,`tourPackages/${c}`),n=await r(e);if(!n.exists())throw new Error("Package not found");const s=n.val();W(s)}catch(e){C("Failed to fetch package details for editing")}finally{N(!1)}},W=e=>{var a,t;h({title:e.title||"",description:e.description||"",destination:e.destination||"",duration:e.duration||"",price:e.price||"",included:(null==(a=e.included)?void 0:a.length)>0?e.included:["","",""],available:void 0===e.available||e.available,featured:e.featured||!1}),g((null==(t=e.itinerary)?void 0:t.length)>0?e.itinerary:[{title:"Day 1",description:""}]),e.images&&e.images.length>0&&E(e.images.map((e=>({url:e.startsWith("http")?e:"https://source.unsplash.com/random/800x600/?travel",name:"string"==typeof e?e.split("/").pop():"image",isExisting:!0}))))},I=e=>{const{name:a,value:t,type:n,checked:s}=e.target;h({...u,[a]:"checkbox"===n?s:t})},q=(e,a,t)=>{const n=[...m];n[e]={...n[e],[a]:t},g(n)};return j?o.jsx("div",{className:"package-form-loading",children:"Loading package data..."}):o.jsxs("div",{className:"package-form-container",children:[o.jsx("h2",{children:s?"Edit Tour Package":"Create New Tour Package"}),o.jsxs("p",{className:"form-subtitle",children:["Fill in the details below to ",s?"update your":"create a new"," tour package"]}),S&&o.jsxs("div",{className:"form-error",children:[o.jsx("i",{className:"fas fa-exclamation-circle"})," ",S]}),M&&o.jsxs("div",{className:"form-success",children:[o.jsx("i",{className:"fas fa-check-circle"})," ",M]}),o.jsxs("form",{onSubmit:async i=>{var o,c;i.preventDefault(),P(!0),C(null),D(null);try{const i=e.currentUser,o=localStorage.getItem("vendorInfo");if(!i||!o)return C("Authentication required"),void P(!1);const c=a(t,`vendors/${i.uid}`);if(!(await r(c)).exists())return C("Vendor authentication required"),void P(!1);const d=new FormData;d.append("title",u.title),d.append("description",u.description),d.append("destination",u.destination),d.append("duration",u.duration),d.append("price",u.price),d.append("available",u.available),d.append("featured",u.featured);const h=u.included.filter((e=>""!==e.trim()));d.append("included",JSON.stringify(h));const g=m.filter((e=>""!==e.description.trim()));d.append("itinerary",JSON.stringify(g));const x=F.filter((e=>e.isExisting)).map((e=>e.name));d.append("existingImages",JSON.stringify(x)),v.forEach((e=>{d.append("images",e)}));const b={title:u.title,description:u.description,destination:u.destination,duration:u.duration,price:parseFloat(u.price),included:h,itinerary:g,available:u.available,featured:u.featured,vendorId:i.uid,createdAt:Date.now(),updatedAt:Date.now()};let j,w;if(s){const e=a(t,`tourPackages/${j}`);await l(e,{...b,updatedAt:Date.now()}),w={data:{...b,id:j}},D("Package updated successfully")}else{const e=a(t,"tourPackages"),n=p(e);j=n.key,await f(n,b),w={data:{...b,id:j}},D("New package created successfully")}n&&setTimeout((()=>{n(w.data)}),1500)}catch(d){C((null==(c=null==(o=d.response)?void 0:o.data)?void 0:c.message)||"Failed to save package. Please try again.")}finally{P(!1)}},className:"package-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"title",children:"Package Title*"}),o.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:I,placeholder:"Enter an attractive package title",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"description",children:"Description*"}),o.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:I,rows:"4",placeholder:"Provide a detailed description of the package, including highlights and unique experiences",required:!0}),o.jsx("small",{className:"form-hint",children:"A compelling description helps travelers understand what makes this package special"})]}),o.jsxs("div",{className:"form-section",children:[o.jsx("h3",{children:"Package Details"}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"destination",children:"Destination*"}),o.jsx("input",{type:"text",id:"destination",name:"destination",value:u.destination,onChange:I,placeholder:"e.g. Kerala, Goa, Rajasthan",required:!0}),o.jsx("small",{className:"form-hint",children:"Popular destination name that travelers will search for"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"duration",children:"Duration*"}),o.jsx("input",{type:"text",id:"duration",name:"duration",value:u.duration,onChange:I,placeholder:"e.g. 3 Days / 2 Nights",required:!0}),o.jsx("small",{className:"form-hint",children:"Format as 'X Days / Y Nights'"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"price",children:"Price (₹)*"}),o.jsxs("div",{className:"price-input-wrapper",children:[o.jsx("span",{className:"price-currency",children:"₹"}),o.jsx("input",{type:"number",id:"price",name:"price",value:u.price,onChange:I,min:"0",placeholder:"e.g. 15000",required:!0})]}),o.jsx("small",{className:"form-hint",children:"Price per person in Indian Rupees"})]})]})]}),o.jsxs("div",{className:"form-row checkbox-row",children:[o.jsxs("div",{className:"form-group checkbox-group",children:[o.jsx("input",{type:"checkbox",id:"available",name:"available",checked:u.available,onChange:I}),o.jsx("label",{htmlFor:"available",children:"Available for Booking"}),o.jsx("small",{className:"checkbox-hint",children:"Uncheck to hide this package from search results"})]}),o.jsxs("div",{className:"form-group checkbox-group",children:[o.jsx("input",{type:"checkbox",id:"featured",name:"featured",checked:u.featured,onChange:I}),o.jsx("label",{htmlFor:"featured",children:"Featured Package"}),o.jsx("small",{className:"checkbox-hint",children:"Featured packages appear on the homepage"})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsx("h3",{children:"What's Included"}),o.jsx("p",{className:"section-description",children:"List the amenities, services, and experiences included in this package"}),o.jsx("div",{className:"included-items-container",children:u.included.map(((e,a)=>o.jsxs("div",{className:"included-item",children:[o.jsx("div",{className:"included-item-icon",children:o.jsx("i",{className:"fas fa-check-circle"})}),o.jsx("input",{type:"text",value:e,onChange:e=>((e,a)=>{const t=[...u.included];t[e]=a,h({...u,included:t})})(a,e.target.value),placeholder:"e.g. Accommodation, Meals, Transportation, etc."}),o.jsx("button",{type:"button",className:"remove-button",onClick:()=>(e=>{const a=[...u.included];a.splice(e,1),h({...u,included:a})})(a),"aria-label":"Remove item",children:o.jsx("i",{className:"fas fa-times"})})]},`included-${a}`)))}),o.jsxs("button",{type:"button",className:"add-button",onClick:()=>{h({...u,included:[...u.included,""]})},children:[o.jsx("i",{className:"fas fa-plus"})," Add Item"]})]}),o.jsxs("div",{className:"form-section",children:[o.jsx("h3",{children:"Itinerary Details"}),o.jsx("p",{className:"section-description",children:"Create a day-by-day breakdown of activities and experiences"}),o.jsx("div",{className:"itinerary-container",children:m.map(((e,a)=>o.jsxs("div",{className:"itinerary-item",children:[o.jsx("div",{className:"itinerary-day-number",children:a+1}),o.jsxs("div",{className:"itinerary-content",children:[o.jsxs("div",{className:"itinerary-header",children:[o.jsx("input",{type:"text",value:e.title,onChange:e=>q(a,"title",e.target.value),placeholder:`Day ${a+1}`,className:"itinerary-day-title"}),o.jsx("button",{type:"button",className:"remove-button small",onClick:()=>(e=>{const a=[...m];a.splice(e,1);const t=a.map(((e,a)=>({...e,title:e.title.startsWith("Day ")?`Day ${a+1}`:e.title})));g(t)})(a),"aria-label":"Remove day",children:o.jsx("i",{className:"fas fa-trash-alt"})})]}),o.jsx("textarea",{value:e.description,onChange:e=>q(a,"description",e.target.value),placeholder:"Describe the activities, meals, accommodations, and highlights for this day in detail",rows:"3",className:"itinerary-description"})]})]},`itinerary-${a}`)))}),o.jsxs("button",{type:"button",className:"add-button",onClick:()=>{g([...m,{title:`Day ${m.length+1}`,description:""}])},children:[o.jsx("i",{className:"fas fa-calendar-plus"})," Add Another Day"]})]}),o.jsxs("div",{className:"form-section",children:[o.jsx("h3",{children:"Package Images"}),o.jsx("p",{className:"section-description",children:"Upload high-quality images that showcase the destination and experiences"}),o.jsxs("div",{className:"image-upload-container",children:[o.jsxs("div",{className:"image-upload-input",children:[o.jsx("input",{type:"file",id:"images",name:"images",onChange:e=>{const a=Array.from(e.target.files);x([...v,...a]);const t=a.map((e=>({url:URL.createObjectURL(e),name:e.name,isExisting:!1})));E([...F,...t])},multiple:!0,accept:"image/*",className:"file-input"}),o.jsxs("label",{htmlFor:"images",className:"custom-file-upload",children:[o.jsx("i",{className:"fas fa-cloud-upload-alt"})," Select Images"]}),o.jsx("small",{className:"form-hint",children:"You can select multiple images at once"})]}),F.length>0&&o.jsx("div",{className:"image-preview-grid",children:F.map(((e,a)=>o.jsxs("div",{className:"image-preview-item",children:[o.jsx("img",{src:e.url,alt:`Preview ${a+1}`}),o.jsx("button",{type:"button",className:"image-preview-remove",onClick:()=>(e=>{const a=[...v],t=[...F];if(!t[e].isExisting){const n=v.findIndex((a=>a.name===t[e].name));-1!==n&&a.splice(n,1)}t.splice(e,1),x(a),E(t)})(a),"aria-label":"Remove image",children:o.jsx("i",{className:"fas fa-times"})}),o.jsx("div",{className:"image-preview-info",children:o.jsxs("span",{className:"image-name",children:[e.isExisting?"Existing: ":"",e.name.length>15?`${e.name.substring(0,15)}...`:e.name]})})]},`image-${a}`)))})]})]}),o.jsxs("div",{className:"form-buttons",children:[o.jsxs("button",{type:"button",className:"cancel-button",onClick:()=>{n?n():d(-1)},children:[o.jsx("i",{className:"fas fa-times"})," Cancel"]}),o.jsx("button",{type:"submit",className:"submit-button",disabled:k,children:k?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"loading-spinner"}),s?"Updating...":"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-save"})," ",s?"Update Package":"Create Package"]})})]})]})]})},Le=()=>{const[n,s]=b.useState("packages"),[i,l]=b.useState(!0),[c,d]=b.useState(null),[u,h]=b.useState(null),[m,g]=b.useState(!1),p=y();b.useEffect((()=>{l(!0);const n=v(e,(async n=>{if(!n)return p("/vendor/login"),void l(!1);try{const s=a(t,`vendors/${n.uid}`),i=await r(s);if(!i.exists())return d("This account is not registered as a vendor. Please use the customer login."),await x(e),void p("/vendor/login");const o=i.val(),l=a(t,`earnings/${n.uid}`),c=await r(l),u=c.exists()?c.val():{total:0},m={...o,earnings:"number"==typeof u?u:u.total||0};h(m),localStorage.setItem("vendorInfo",JSON.stringify(m))}catch(s){d("Failed to load vendor profile. Please try logging in again.")}finally{l(!1)}}));return()=>n()}),[p]);if(i)return o.jsxs("div",{className:"loading-spinner-container",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading dashboard..."})]});if(c)return o.jsx("div",{className:"error-container",children:o.jsx("div",{className:"alert alert-danger",children:c})});const f=[{title:"Earnings",value:`₹${Math.floor((null==u?void 0:u.earnings)||0).toLocaleString("en-IN")}`,icon:"rupee",color:"warning",description:"Total revenue from bookings"}];return o.jsxs("div",{className:"vendor-dashboard-container",children:[o.jsxs("aside",{className:"vendor-sidebar",children:[o.jsxs("div",{className:"sidebar-header",children:[o.jsx("h2",{children:"Travelita"}),o.jsx("p",{children:"Vendor Portal"})]}),o.jsxs("nav",{className:"sidebar-nav",children:[o.jsx("div",{className:"nav-item",children:o.jsxs("a",{href:"#",className:"nav-link "+("packages"===n?"active":""),onClick:e=>{e.preventDefault(),s("packages"),g(!1)},children:[o.jsx("span",{})," Tour Packages"]})}),o.jsx("div",{className:"nav-item",children:o.jsxs("a",{href:"#",className:"nav-link "+("bookings"===n?"active":""),onClick:e=>{e.preventDefault(),s("bookings"),g(!1)},children:[o.jsx("span",{})," Bookings"]})}),o.jsx("div",{className:"nav-item",children:o.jsxs("a",{href:"#",className:"nav-link "+("profile"===n?"active":""),onClick:e=>{e.preventDefault(),s("profile"),g(!1)},children:[o.jsx("span",{})," Profile"]})})]}),o.jsx("div",{className:"sidebar-footer",children:o.jsxs("button",{className:"btn btn-block btn-outline",onClick:async()=>{try{await x(e),localStorage.removeItem("vendorInfo"),p("/vendor/login")}catch(a){d("Failed to log out. Please try again.")}},children:[o.jsx("span",{})," Logout"]})})]}),o.jsxs("main",{className:"vendor-main-content",children:[o.jsx("header",{className:"dashboard-header",children:o.jsx("div",{className:"dashboard-header-content",children:o.jsxs("div",{className:"welcome-section",children:[o.jsxs("h1",{children:["Welcome back, ",(null==u?void 0:u.name)||"Vendor","! 👋"]}),o.jsx("p",{children:"Here's what's happening with your tour business today"})]})})}),o.jsx("div",{className:"quick-stats",children:f.map(((e,a)=>o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",style:{background:`var(--${e.color}-100)`,color:`var(--${e.color}-600)`},children:e.icon}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:e.value}),o.jsx("p",{children:e.title})]})]},a)))}),o.jsxs("div",{className:"content-body",children:["packages"===n&&!m&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h2",{className:"card-title",children:"My Tour Packages"}),o.jsx("button",{className:"btn btn-primary",onClick:()=>g(!0),children:"+ Add New Package"})]}),o.jsx("div",{className:"card-body",children:o.jsx(L,{})})]}),"packages"===n&&m&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h2",{className:"card-title",children:"Add New Package"}),o.jsx("button",{className:"btn btn-outline",onClick:()=>g(!1),children:"← Back to Packages"})]}),o.jsx("div",{className:"card-body",children:o.jsx(Ae,{onSuccess:()=>g(!1)})})]}),"bookings"===n&&o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsx(Ie,{})})}),"profile"===n&&o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsx(qe,{vendorInfo:u})})})]})]})]})};export{Le as default};
