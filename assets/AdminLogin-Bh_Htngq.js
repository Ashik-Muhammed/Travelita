import{j as e}from"./index-DbrkFvWc.js";import{r as a,u as s,L as r}from"./router-DJX9oSP-.js";import{a as i}from"./axios-rSMZb3Ae.js";import"./react-CMmhtoO5.js";function n(){const[n,o]=a.useState(""),[t,l]=a.useState(""),[d,m]=a.useState(""),[c,p]=a.useState(!1),u=s();return e.jsx("div",{className:"admin-login-page",children:e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:"Admin Login"}),e.jsx("p",{children:"Access the administration panel"}),e.jsxs("div",{style:{marginTop:"10px",textAlign:"center",fontSize:"12px",color:"#666"},children:[e.jsx("p",{children:"Use the following credentials:"}),e.jsx("p",{children:"Email: admin@gmail.com"}),e.jsx("p",{children:"Password: admin"})]})]}),d&&e.jsx("div",{className:"admin-login-error",children:e.jsx("p",{children:d})}),e.jsxs("form",{className:"admin-login-form",onSubmit:async e=>{if(e.preventDefault(),n&&t)try{p(!0),m("");const e="http://localhost:5000",a=await i.post(`${e}/api/auth/login`,{email:n,password:t},{headers:{"Content-Type":"application/json"},timeout:1e4});if("admin"!==a.data.user.role)return localStorage.removeItem("token"),localStorage.removeItem("user"),void m("Access denied. Admin privileges required.");localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),localStorage.setItem("userRole","admin"),u("/admin/dashboard")}catch(a){"ECONNREFUSED"===a.code||"ERR_CONNECTION_REFUSED"===a.code?m("Cannot connect to the server. Please make sure the backend server is running."):a.response?m(a.response.data.message||"Authentication failed. Please check your credentials."):a.request?m("No response from server. Please try again later."):m("An unexpected error occurred. Please try again.")}finally{p(!1)}else m("Email and password are required")},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:e=>o(e.target.value),placeholder:"admin@example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:e=>l(e.target.value),placeholder:"Enter your password"})]}),e.jsx("button",{type:"submit",disabled:c,className:"admin-login-button",children:c?"Logging in...":"Sign in"})]}),e.jsx("div",{className:"admin-login-divider",children:e.jsx("span",{children:"Not an administrator?"})}),e.jsxs("div",{className:"admin-login-footer",children:[e.jsx(r,{to:"/login",children:"User Login"}),e.jsx(r,{to:"/vendor/login",children:"Vendor Login"})]})]})})}export{n as default};
