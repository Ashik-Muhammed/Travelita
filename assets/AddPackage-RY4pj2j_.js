import{j as e}from"./index-DbrkFvWc.js";import{u as a,r as i}from"./router-DJX9oSP-.js";import{a as s}from"./axios-rSMZb3Ae.js";import"./react-CMmhtoO5.js";const r=()=>{const r=a(),[t,n]=i.useState(!1),[l,c]=i.useState(null),[d,o]=i.useState({title:"",description:"",destination:"",duration:"",price:"",images:[],included:[""],itinerary:[{day:1,description:""}],featured:!1,available:!0}),m=e=>{const{name:a,value:i,type:s,checked:r}=e.target;o((e=>({...e,[a]:"checkbox"===s?r:i})))};return e.jsxs("div",{className:"add-package-page",children:[e.jsx("div",{className:"add-package-header",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Add New Package"}),e.jsx("p",{children:"Create a new tour package for your customers"})]})}),e.jsx("div",{className:"container",children:e.jsxs("form",{onSubmit:async e=>{var a,i;e.preventDefault(),n(!0),c(null);try{const e=localStorage.getItem("token");if(!e)return void r("/login");(await s.post("http://localhost:5000/api/packages",d,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data.success&&r("/packages")}catch(t){c((null==(i=null==(a=t.response)?void 0:a.data)?void 0:i.message)||"Failed to create package. Please try again.")}finally{n(!1)}},className:"package-form",children:[l&&e.jsx("div",{className:"error-message",children:l}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Basic Information"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Package Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:m,required:!0,placeholder:"Enter package title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:d.description,onChange:m,required:!0,placeholder:"Enter package description",rows:"4"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"destination",children:"Destination"}),e.jsx("input",{type:"text",id:"destination",name:"destination",value:d.destination,onChange:m,required:!0,placeholder:"Enter destination"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"duration",children:"Duration (days)"}),e.jsx("input",{type:"number",id:"duration",name:"duration",value:d.duration,onChange:m,required:!0,min:"1",placeholder:"Enter duration"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"price",children:"Price (₹)"}),e.jsx("input",{type:"number",id:"price",name:"price",value:d.price,onChange:m,required:!0,min:"0",placeholder:"Enter price"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Package Images"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"images",children:"Upload Images"}),e.jsx("input",{type:"file",id:"images",accept:"image/*",multiple:!0,onChange:e=>{const a=Array.from(e.target.files).map((e=>new Promise(((a,i)=>{const s=new FileReader;s.onload=e=>a(e.target.result),s.onerror=i,s.readAsDataURL(e)}))));Promise.all(a).then((e=>{o((a=>({...a,images:[...a.images,...e]})))})).catch((e=>{c("Failed to read images. Please try again.")}))},className:"file-input"}),e.jsx("p",{className:"help-text",children:"You can select multiple images"})]}),d.images.length>0&&e.jsx("div",{className:"image-preview-grid",children:d.images.map(((a,i)=>e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:a,alt:`Preview ${i+1}`}),e.jsx("button",{type:"button",className:"remove-image",onClick:()=>(e=>{o((a=>({...a,images:a.images.filter(((a,i)=>i!==e))})))})(i),children:"×"})]},i)))})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"What's Included"}),d.included.map(((a,i)=>e.jsxs("div",{className:"included-item",children:[e.jsx("input",{type:"text",value:a,onChange:e=>((e,a)=>{const i=[...d.included];i[e]=a,o((e=>({...e,included:i})))})(i,e.target.value),placeholder:"Enter included item",required:!0}),e.jsx("button",{type:"button",className:"remove-btn",onClick:()=>(e=>{o((a=>({...a,included:a.included.filter(((a,i)=>i!==e))})))})(i),children:"Remove"})]},i))),e.jsx("button",{type:"button",className:"add-btn",onClick:()=>{o((e=>({...e,included:[...e.included,""]})))},children:"Add Included Item"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Itinerary"}),d.itinerary.map(((a,i)=>e.jsxs("div",{className:"itinerary-day",children:[e.jsxs("div",{className:"day-header",children:[e.jsxs("h3",{children:["Day ",a.day]}),e.jsx("button",{type:"button",className:"remove-btn",onClick:()=>(e=>{o((a=>({...a,itinerary:a.itinerary.filter(((a,i)=>i!==e)).map(((e,a)=>({...e,day:a+1})))})))})(i),children:"Remove Day"})]}),e.jsx("textarea",{value:a.description,onChange:e=>((e,a,i)=>{const s=[...d.itinerary];s[e]={...s[e],[a]:i},o((e=>({...e,itinerary:s})))})(i,"description",e.target.value),placeholder:"Enter day's activities",required:!0,rows:"3"})]},i))),e.jsx("button",{type:"button",className:"add-btn",onClick:()=>{o((e=>({...e,itinerary:[...e.itinerary,{day:e.itinerary.length+1,description:""}]})))},children:"Add Day"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Package Settings"}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"featured",checked:d.featured,onChange:m}),"Feature this package"]})}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"available",checked:d.available,onChange:m}),"Make package available for booking"]})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>r("/packages"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:t?"Creating Package...":"Create Package"})]})]})})]})};export{r as default};
