import{j as e,c as s,d as a,g as i}from"./index-DP01dw56.js";import{d as t,r as c,u as n,L as r}from"./router-CE_eIJm-.js";import"./react-CMmhtoO5.js";function o(){const{destination:o}=t(),[l,d]=c.useState([]),[h,m]=c.useState(!0),[p,x]=c.useState(null),[g,j]=c.useState(null),u=n();c.useEffect((()=>{(async()=>{if(o)try{m(!0);const e=s(a,"tourPackages"),t=await i(e);if(!t.exists())return d([]),void m(!1);const c=[];t.forEach((e=>{const s=e.val();s.destination&&s.destination.toLowerCase()===o.toLowerCase()&&c.push({id:e.key,...s})})),c.sort(((e,s)=>e.price-s.price)),c.length>0&&c[0].imageUrl&&j(c[0].imageUrl),d(c),m(!1)}catch(e){x(`Failed to fetch packages for ${o}`),m(!1)}})()}),[o]);return h?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsxs("p",{children:["Loading packages for ",o,"..."]})]}):p?e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:p}),e.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Try Again"})]}):e.jsxs("div",{className:"destination-page",children:[e.jsxs("div",{className:"destination-hero",children:[e.jsx("img",{src:g||`https://source.unsplash.com/featured/1200x400?${o},travel`,alt:o}),e.jsx("div",{className:"destination-hero-overlay",children:e.jsxs("div",{className:"destination-hero-content",children:[e.jsxs("h1",{children:["Explore ",o]}),e.jsx("p",{children:"Discover amazing tour packages for your perfect vacation in one of our most popular destinations"})]})})]}),e.jsx("div",{className:"container",children:0===l.length?e.jsxs("div",{className:"no-packages",children:[e.jsxs("p",{children:["No packages available for ",o," at the moment."]}),e.jsx(r,{to:"/",className:"back-home-button",children:"Back to Home"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"destination-section-header",children:[e.jsxs("h2",{className:"destination-section-title",children:["Tour Packages in ",o]}),e.jsxs("button",{onClick:()=>{u(-1)},className:"back-button",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 12H5"}),e.jsx("path",{d:"M12 19l-7-7 7-7"})]}),"Back"]})]}),e.jsx("div",{className:"destination-packages-grid",children:l.map((s=>e.jsxs("div",{className:"package-card",children:[e.jsx("div",{className:"package-image-container",children:e.jsx("img",{className:"package-image",src:s.imageUrl||"https://via.placeholder.com/300x200?text=No+Image",alt:s.title})}),e.jsxs("div",{className:"package-content",children:[e.jsx("h3",{className:"package-title",children:s.title}),e.jsx("p",{className:"package-description",children:s.description}),e.jsxs("div",{className:"package-meta",children:[e.jsxs("div",{className:"package-price",children:["â‚¹",s.price.toLocaleString()]}),e.jsx("div",{className:"package-duration",children:s.duration})]}),e.jsx(r,{to:`/packages/${s.id}`,className:"package-button",children:"View Details"})]})]},s.id)))})]})})]})}export{o as default};
