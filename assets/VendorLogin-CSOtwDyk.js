import{j as e,b as a,c as s,d as r,g as t,i as o,s as n}from"./index-DS7tty99.js";import{r as i,u as l,L as d}from"./router-CE_eIJm-.js";/* empty css                  */import"./react-CMmhtoO5.js";const c=()=>{const[c,u]=i.useState({email:"",password:""}),[m,h]=i.useState(!1),[g,f]=i.useState(null),v=l();i.useEffect((()=>{(async()=>{try{const e=a.currentUser,o=localStorage.getItem("vendorInfo");if(e&&o){JSON.parse(o);const a=s(r,`vendors/${e.uid}`);if((await t(a)).exists())return void v("/vendor/dashboard")}}catch(e){localStorage.removeItem("vendorInfo")}})()}),[v]);const p=e=>{u({...c,[e.target.name]:e.target.value})};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-form-container",children:[e.jsx("h2",{children:"Vendor Login"}),g&&e.jsx("div",{className:"auth-error",children:g}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),h(!0),f(null);try{const e=(await o(a,c.email,c.password)).user,i=s(r,`vendors/${e.uid}`),l=await t(i);if(!l.exists())return f("This account is not registered as a vendor. Please use the customer login."),await n(a),void h(!1);const d=l.val();localStorage.setItem("vendorInfo",JSON.stringify(d)),v("/vendor/dashboard")}catch(i){let e="Failed to login. Please check your credentials.";if(i.code)switch(i.code){case"auth/user-not-found":e="Account not found. Please check your email or register if you're new.",setTimeout((()=>{confirm("Would you like to register as a new vendor instead?")&&v("/vendor/register")}),1e3);break;case"auth/wrong-password":e="Invalid password. Please try again.";break;case"auth/invalid-email":e="Invalid email format. Please check and try again.";break;case"auth/too-many-requests":e="Too many failed login attempts. Please try again later or reset your password.";break;case"auth/network-request-failed":e="Network error. Please check your internet connection and try again.";break;default:e=`Login failed: ${i.message}`}f(e)}finally{h(!1)}},className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:p,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:c.password,onChange:p,required:!0})]}),e.jsx("button",{type:"submit",className:"auth-button",disabled:m,children:m?"Logging in...":"Login"})]}),e.jsxs("div",{className:"auth-links",children:[e.jsxs("p",{children:["Don't have an account? ",e.jsx(d,{to:"/vendor/register",children:"Register"})]}),e.jsx("p",{children:e.jsx(d,{to:"/",children:"Back to Home"})})]})]})})};export{c as default};
