import{j as e,a,b as i,c as s,p as r,f as t}from"./index-CGBRwBly.js";import{u as n,r as l}from"./router-CbvfO1vz.js";import"./react-CMmhtoO5.js";const c=()=>{const c=n(),[d,o]=l.useState(!1),[m,h]=l.useState(null),[u,p]=l.useState({title:"",description:"",destination:"",duration:"",price:"",images:[],included:[""],itinerary:[{day:1,description:""}],featured:!1,available:!0}),g=e=>{const{name:a,value:i,type:s,checked:r}=e.target;p((e=>({...e,[a]:"checkbox"===s?r:i})))};return e.jsxs("div",{className:"add-package-page",children:[e.jsx("div",{className:"add-package-header",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Add New Package"}),e.jsx("p",{children:"Create a new tour package for your customers"})]})}),e.jsx("div",{className:"container",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),h(null);try{const e=a.currentUser;if(!e)return void c("/vendor/login");const n={...u,vendorId:e.uid,status:"pending",createdAt:Date.now(),views:0,ratings:0},l=i(s,"tourPackages"),d=r(l);await t(d,n),c("/vendor/dashboard")}catch(n){h(n.message||"Failed to create package. Please try again.")}finally{o(!1)}},className:"package-form",children:[m&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Basic Information"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Package Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:g,required:!0,placeholder:"Enter package title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:g,required:!0,placeholder:"Enter package description",rows:"4"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"destination",children:"Destination"}),e.jsx("input",{type:"text",id:"destination",name:"destination",value:u.destination,onChange:g,required:!0,placeholder:"Enter destination"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"duration",children:"Duration (days)"}),e.jsx("input",{type:"number",id:"duration",name:"duration",value:u.duration,onChange:g,required:!0,min:"1",placeholder:"Enter duration"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"price",children:"Price (₹)"}),e.jsx("input",{type:"number",id:"price",name:"price",value:u.price,onChange:g,required:!0,min:"0",placeholder:"Enter price"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Package Images"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"images",children:"Upload Images"}),e.jsx("input",{type:"file",id:"images",accept:"image/*",multiple:!0,onChange:e=>{const a=Array.from(e.target.files);if(a.filter((e=>e.size>1048576)).length>0)return void h("Some images are too large (max 1MB each). Please resize them and try again.");const i=a.map((e=>new Promise(((a,i)=>{const s=new FileReader;s.onload=e=>{a(e.target.result)},s.onerror=i,s.readAsDataURL(e)}))));Promise.all(i).then((e=>{const a=[...u.images,...e];a.length>5?h("Maximum 5 images allowed per package."):p((e=>({...e,images:a})))})).catch((e=>{h("Failed to read images. Please try again.")}))},className:"file-input"}),e.jsx("p",{className:"help-text",children:"You can select multiple images"})]}),u.images.length>0&&e.jsx("div",{className:"image-preview-grid",children:u.images.map(((a,i)=>e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:a,alt:`Preview ${i+1}`}),e.jsx("button",{type:"button",className:"remove-image",onClick:()=>(e=>{p((a=>({...a,images:a.images.filter(((a,i)=>i!==e))})))})(i),children:"×"})]},i)))})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"What's Included"}),u.included.map(((a,i)=>e.jsxs("div",{className:"included-item",children:[e.jsx("input",{type:"text",value:a,onChange:e=>((e,a)=>{const i=[...u.included];i[e]=a,p((e=>({...e,included:i})))})(i,e.target.value),placeholder:"Enter included item",required:!0}),e.jsx("button",{type:"button",className:"remove-btn",onClick:()=>(e=>{p((a=>({...a,included:a.included.filter(((a,i)=>i!==e))})))})(i),children:"Remove"})]},i))),e.jsx("button",{type:"button",className:"add-btn",onClick:()=>{p((e=>({...e,included:[...e.included,""]})))},children:"Add Included Item"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Itinerary"}),u.itinerary.map(((a,i)=>e.jsxs("div",{className:"itinerary-day",children:[e.jsxs("div",{className:"day-header",children:[e.jsxs("h3",{children:["Day ",a.day]}),e.jsx("button",{type:"button",className:"remove-btn",onClick:()=>(e=>{p((a=>({...a,itinerary:a.itinerary.filter(((a,i)=>i!==e)).map(((e,a)=>({...e,day:a+1})))})))})(i),children:"Remove Day"})]}),e.jsx("textarea",{value:a.description,onChange:e=>((e,a,i)=>{const s=[...u.itinerary];s[e]={...s[e],[a]:i},p((e=>({...e,itinerary:s})))})(i,"description",e.target.value),placeholder:"Enter day's activities",required:!0,rows:"3"})]},i))),e.jsx("button",{type:"button",className:"add-btn",onClick:()=>{p((e=>({...e,itinerary:[...e.itinerary,{day:e.itinerary.length+1,description:""}]})))},children:"Add Day"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Package Settings"}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"featured",checked:u.featured,onChange:g}),"Feature this package"]})}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"available",checked:u.available,onChange:g}),"Make package available for booking"]})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>c("/packages"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Creating Package...":"Create Package"})]})]})})]})};export{c as default};
