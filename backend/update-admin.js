require("dotenv").config(); const mongoose = require("mongoose"); const bcrypt = require("bcrypt"); const User = require("./models/User"); const MONGO_URI = process.env.MONGO_URI || "mongodb://localhost:27017/tour-packages"; async function updateAdmin() { try { await mongoose.connect(MONGO_URI); console.log("Connected!"); const admin = await User.findOne({ email: "admin@gmail.com" }); console.log("Admin found:", admin ? "Yes" : "No"); if (admin) { const salt = await bcrypt.genSalt(10); const hash = await bcrypt.hash("admin", salt); console.log("New password hash:", hash.substring(0, 20) + "..."); await User.updateOne({ _id: admin._id }, { $set: { password: hash } }); console.log("Password updated!"); } } catch (err) { console.error("Error:", err); } finally { mongoose.connection.close(); } } updateAdmin();
