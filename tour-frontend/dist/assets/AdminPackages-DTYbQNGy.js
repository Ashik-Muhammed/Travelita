import{j as e,t as a}from"./index-CGBRwBly.js";import{r as s,L as t}from"./router-CbvfO1vz.js";import"./react-CMmhtoO5.js";const i=()=>{const[i,c]=s.useState([]),[l,r]=s.useState(!0),[n,d]=s.useState(""),[o,m]=s.useState(""),[u,h]=s.useState("all"),[p,x]=s.useState(null),[j,g]=s.useState({name:"",destination:"",duration:"",price:"",category:"",featured:!1});s.useEffect((()=>{(async()=>{try{const e=await a.get("packages"),s=Object.entries(e||{}).map((([e,a])=>({id:e,...a})));c(s)}catch(e){d("Failed to load packages. Please refresh the page.")}finally{r(!1)}})()}),[]);const f=e=>{const{name:a,value:s,type:t,checked:i}=e.target;g((e=>({...e,[a]:"checkbox"===t?i:s})))},v=i.filter((e=>{const a=e.name&&e.name.toLowerCase().includes(o)||e.destination&&e.destination.toLowerCase().includes(o)||e.description&&e.description.toLowerCase().includes(o),s="all"===u||e.category===u;return a&&s})),N=["all",...new Set(i.map((e=>e.category)).filter(Boolean))];return l?e.jsx("div",{className:"admin-packages",children:"Loading packages..."}):n?e.jsx("div",{className:"error-message",children:n}):e.jsxs("div",{className:"admin-packages",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h2",{children:"Manage Tour Packages"}),e.jsxs(t,{to:"/admin/packages/new",className:"add-package-btn",children:[e.jsx("i",{className:"fas fa-plus"})," Add New Package"]})]}),e.jsxs("div",{className:"filters",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"Search packages...",value:o,onChange:e=>{m(e.target.value.toLowerCase())}}),e.jsx("i",{className:"fas fa-search"})]}),e.jsx("div",{className:"category-filter",children:e.jsxs("select",{value:u,onChange:e=>{h(e.target.value)},children:[e.jsx("option",{value:"all",children:"All Categories"}),N.filter((e=>"all"!==e)).map((a=>e.jsx("option",{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a)))]})})]}),e.jsxs("div",{className:"packages-summary",children:[e.jsxs("div",{className:"summary-card total",children:[e.jsx("h3",{children:"Total Packages"}),e.jsx("div",{className:"value",children:i.length})]}),e.jsxs("div",{className:"summary-card featured",children:[e.jsx("h3",{children:"Featured"}),e.jsx("div",{className:"value",children:i.filter((e=>e.featured)).length})]}),e.jsxs("div",{className:"summary-card adventure",children:[e.jsx("h3",{children:"Adventure"}),e.jsx("div",{className:"value",children:i.filter((e=>"adventure"===e.category)).length})]}),e.jsxs("div",{className:"summary-card luxury",children:[e.jsx("h3",{children:"Luxury"}),e.jsx("div",{className:"value",children:i.filter((e=>"luxury"===e.category)).length})]})]}),0===v.length?e.jsxs("div",{className:"no-results",children:[e.jsx("i",{className:"fas fa-box-open"}),e.jsx("p",{children:"No packages found"}),e.jsxs(t,{to:"/admin/packages/new",className:"add-package-btn",children:[e.jsx("i",{className:"fas fa-plus"})," Add Your First Package"]})]}):e.jsx("div",{className:"packages-grid",children:v.map((s=>{return e.jsxs("div",{className:"package-card "+(s.featured?"featured":""),children:[s.featured&&e.jsx("div",{className:"featured-badge",children:"Featured"}),e.jsxs("div",{className:"package-image",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name}):e.jsx("div",{className:"image-placeholder",children:e.jsx("i",{className:"fas fa-camera"})}),e.jsx("div",{className:"package-actions",children:e.jsx("button",{className:"feature-btn "+(s.featured?"active":""),onClick:()=>(async e=>{try{const s=!e.featured;await a.update(`packages/${e.id}`,{featured:s}),c(i.map((a=>a.id===e.id?{...a,featured:s}:a)))}catch(s){d("Failed to update package status")}})(s),title:s.featured?"Remove from featured":"Add to featured",children:e.jsx("i",{className:"fas fa-star"})})})]}),e.jsx("div",{className:"package-details",children:p===s.id?e.jsxs("div",{className:"edit-form",children:[e.jsx("input",{type:"text",name:"name",value:j.name,onChange:f,placeholder:"Package name",className:"form-input"}),e.jsx("input",{type:"text",name:"destination",value:j.destination,onChange:f,placeholder:"Destination",className:"form-input"}),e.jsxs("div",{className:"form-row",children:[e.jsx("input",{type:"text",name:"duration",value:j.duration,onChange:f,placeholder:"Duration",className:"form-input"}),e.jsx("input",{type:"number",name:"price",value:j.price,onChange:f,placeholder:"Price",className:"form-input"})]}),e.jsxs("select",{name:"category",value:j.category,onChange:f,className:"form-select",children:[e.jsx("option",{value:"adventure",children:"Adventure"}),e.jsx("option",{value:"beach",children:"Beach"}),e.jsx("option",{value:"cultural",children:"Cultural"}),e.jsx("option",{value:"luxury",children:"Luxury"}),e.jsx("option",{value:"wildlife",children:"Wildlife"}),e.jsx("option",{value:"honeymoon",children:"Honeymoon"}),e.jsx("option",{value:"family",children:"Family"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"save-btn",onClick:()=>(async e=>{try{await a.set(`packages/${e}`,{...j,id:e,updatedAt:Date.now()}),c(i.map((a=>a.id===e?{...a,...j}:a))),x(null)}catch(s){d("Failed to update package: "+(s.message||"Please try again."))}})(s.id),children:"Save"}),e.jsx("button",{className:"cancel-btn",onClick:()=>x(null),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"package-header",children:[e.jsx("h3",{children:s.name}),e.jsxs("div",{className:"package-price",children:[(l=s.price||0,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)),e.jsx("span",{children:"per person"})]})]}),e.jsxs("div",{className:"package-meta",children:[e.jsxs("span",{className:"destination",children:[e.jsx("i",{className:"fas fa-map-marker-alt"})," ",s.destination]}),e.jsxs("span",{className:"duration",children:[e.jsx("i",{className:"far fa-clock"})," ",s.duration]}),e.jsx("span",{className:`category ${s.category||"adventure"}`,children:s.category||"Adventure"})]}),e.jsxs("div",{className:"package-actions",children:[e.jsxs("button",{className:"edit-btn",onClick:()=>(e=>{x(e.id),g({name:e.name||"",destination:e.destination||"",duration:e.duration||"",price:e.price||"",category:e.category||"adventure",featured:e.featured||!1})})(s),children:[e.jsx("i",{className:"fas fa-edit"})," Edit"]}),e.jsxs("button",{className:"delete-btn",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this package?"))try{await a.remove(`packages/${e}`),c(i.filter((a=>a.id!==e)))}catch(s){d("Failed to delete package")}})(s.id),children:[e.jsx("i",{className:"fas fa-trash"})," Delete"]}),e.jsxs(t,{to:`/package/${s.id}`,className:"view-btn",target:"_blank",rel:"noopener noreferrer",children:[e.jsx("i",{className:"fas fa-eye"})," View"]})]})]})})]},s.id);var l}))})]})};export{i as default};
