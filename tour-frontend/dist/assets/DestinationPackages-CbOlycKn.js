import{j as s,c as e,d as a,g as i}from"./index-YV7c_xAD.js";import{b as t,r,u as c,L as n}from"./router-CbvfO1vz.js";import"./react-CMmhtoO5.js";function o(){const{destination:o}=t(),[l,d]=r.useState([]),[h,p]=r.useState(!0),[m,x]=r.useState(null),[g,j]=r.useState(null),u=c();r.useEffect((()=>{(async()=>{if(o)try{p(!0);const s=e(a,"tourPackages"),t=await i(s);if(!t.exists())return d([]),void p(!1);const r=[];t.forEach((s=>{const e=s.val();e.destination&&e.destination.toLowerCase()===o.toLowerCase()&&r.push({id:s.key,...e})})),r.sort(((s,e)=>s.price-e.price)),r.length>0&&r[0].imageUrl&&j(r[0].imageUrl),d(r),p(!1)}catch(s){x(`Failed to fetch packages for ${o}`),p(!1)}})()}),[o]);return h?s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"spinner"}),s.jsxs("p",{children:["Loading packages for ",o,"..."]})]}):m?s.jsxs("div",{className:"error-container",children:[s.jsx("h2",{children:"Error"}),s.jsx("p",{children:m}),s.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Try Again"})]}):s.jsxs("div",{className:"destination-page",children:[s.jsxs("div",{className:"destination-hero",children:[s.jsx("img",{src:g||`https://source.unsplash.com/featured/1200x400?${o},travel`,alt:o}),s.jsx("div",{className:"destination-hero-overlay",children:s.jsxs("div",{className:"destination-hero-content",children:[s.jsxs("h1",{children:["Explore ",o]}),s.jsx("p",{children:"Discover amazing tour packages for your perfect vacation in one of our most popular destinations"})]})})]}),s.jsx("div",{className:"container",children:0===l.length?s.jsxs("div",{className:"no-packages",children:[s.jsxs("p",{children:["No packages available for ",o," at the moment."]}),s.jsx(n,{to:"/",className:"back-home-button",children:"Back to Home"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"destination-section-header",children:[s.jsxs("h2",{className:"destination-section-title",children:["Tour Packages in ",o]}),s.jsxs("button",{onClick:()=>{u(-1)},className:"back-button",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 12H5"}),s.jsx("path",{d:"M12 19l-7-7 7-7"})]}),"Back"]})]}),s.jsx("div",{className:"destination-packages-grid",children:l.map((e=>s.jsxs("div",{className:"package-card",children:[s.jsx("div",{className:"package-image-container",children:s.jsx("img",{className:"package-image",src:e.imageUrl||"https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:e.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"}})}),s.jsxs("div",{className:"package-content",children:[s.jsx("h3",{className:"package-title",children:e.title}),s.jsx("p",{className:"package-description",children:e.description}),s.jsxs("div",{className:"package-meta",children:[s.jsxs("div",{className:"package-price",children:["â‚¹",e.price.toLocaleString()]}),s.jsx("div",{className:"package-duration",children:e.duration})]}),s.jsx(n,{to:`/packages/${e.id}`,className:"package-button",children:"View Details"})]})]},e.id)))})]})})]})}export{o as default};
