import{b as e,j as s}from"./index-YV7c_xAD.js";import{r as a,L as i}from"./router-CbvfO1vz.js";import"./react-CMmhtoO5.js";const r=()=>s.jsx("span",{className:"icon-style",children:"📍"}),t=()=>s.jsx("span",{className:"icon-style",children:"🕒"}),c=()=>{const[c,l]=a.useState([]),[n,o]=a.useState(!0),[d,p]=a.useState(null),[h,m]=a.useState(""),[x,u]=a.useState({destination:"",minPrice:"",maxPrice:"",sortBy:"title",sortOrder:"asc"}),{getPackages:j}=e();a.useEffect((()=>{(async()=>{try{o(!0),p(null);const e=await j({},1,1e3);l(e.packages||[])}catch(e){p("Could not load packages. Please try again later.")}finally{o(!1)}})()}),[j]);const g=c.filter((e=>{const s=e.title.toLowerCase().includes(h.toLowerCase())||e.destination.toLowerCase().includes(h.toLowerCase()),a=Number(e.price)||0,i=!x.minPrice||a>=Number(x.minPrice),r=!x.maxPrice||a<=Number(x.maxPrice),t=!x.destination||e.destination.toLowerCase()===x.destination.toLowerCase();return s&&i&&r&&t})).sort(((e,s)=>{let a,i;switch(x.sortBy){case"price":a=Number(e.price)||0,i=Number(s.price)||0;break;case"title":case"destination":a=String(e[x.sortBy]||"").toLowerCase(),i=String(s[x.sortBy]||"").toLowerCase();break;default:a=e[x.sortBy]||0,i=s[x.sortBy]||0}return"asc"===x.sortOrder?a>i?1:-1:a<i?1:-1})),N=[...new Set(c.map((e=>e.destination)))].sort();return n?s.jsxs("div",{className:"all-packages-loading",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"Loading packages..."})]}):d?s.jsx("div",{className:"all-packages-error",children:d}):s.jsxs("div",{className:"all-packages-page",children:[s.jsx("div",{className:"page-header",children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{children:"All Tour Packages"}),s.jsx("p",{children:"Explore our wide range of travel experiences"})]})}),s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"filters-container",children:[s.jsxs("div",{className:"search-box",children:[s.jsx("input",{type:"text",placeholder:"Search packages...",value:h,onChange:e=>m(e.target.value),className:"search-input"}),s.jsx("i",{className:"fas fa-search search-icon"})]}),s.jsxs("div",{className:"filters-row",children:[s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{children:"Destination"}),s.jsxs("select",{value:x.destination,onChange:e=>u({...x,destination:e.target.value}),className:"filter-select",children:[s.jsx("option",{value:"",children:"All Destinations"}),N.map(((e,a)=>s.jsx("option",{value:e,children:e},a)))]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{children:"Min Price"}),s.jsx("input",{type:"number",placeholder:"Min",value:x.minPrice,onChange:e=>u({...x,minPrice:e.target.value}),className:"price-input",min:"0"})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{children:"Max Price"}),s.jsx("input",{type:"number",placeholder:"Max",value:x.maxPrice,onChange:e=>u({...x,maxPrice:e.target.value}),className:"price-input",min:x.minPrice||"0"})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{children:"Sort By"}),s.jsxs("select",{value:`${x.sortBy}-${x.sortOrder}`,onChange:e=>{const[s,a]=e.target.value.split("-");u({...x,sortBy:s,sortOrder:a})},className:"filter-select",children:[s.jsx("option",{value:"title-asc",children:"Name (A-Z)"}),s.jsx("option",{value:"title-desc",children:"Name (Z-A)"}),s.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),s.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),s.jsx("option",{value:"destination-asc",children:"Destination (A-Z)"}),s.jsx("option",{value:"destination-desc",children:"Destination (Z-A)"})]})]})]})]}),s.jsx("div",{className:"packages-grid",children:g.length>0?g.map((e=>s.jsxs("div",{className:"package-card",children:[s.jsxs("div",{className:"package-image",children:[s.jsx("img",{src:e.images&&e.images.length>0?e.images[0]:"https://via.placeholder.com/300x200?text=No+Image",alt:e.title}),e.featured&&s.jsx("span",{className:"featured-badge",children:"Featured"})]}),s.jsxs("div",{className:"package-details",children:[s.jsx("h3",{children:e.title}),s.jsxs("p",{className:"destination",children:[s.jsx(r,{})," ",e.destination]}),s.jsxs("p",{className:"duration",children:[s.jsx(t,{})," ",e.duration]}),s.jsxs("div",{className:"price-section",children:[s.jsxs("span",{className:"price",children:["₹","number"==typeof e.price?e.price.toLocaleString():e.price]}),s.jsx("span",{className:"per-person",children:"per person"})]}),s.jsx(i,{to:`/packages/${e.id}`,className:"view-details-btn",children:"View Details"})]})]},e.id))):s.jsxs("div",{className:"no-results",children:[s.jsx("i",{className:"fas fa-search"}),s.jsx("h3",{children:"No packages found"}),s.jsx("p",{children:"Try adjusting your search or filters"})]})})]})]})};export{c as default};
