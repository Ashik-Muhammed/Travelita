import{j as e,h as a,b as s,e as r,c as n,d as i}from"./index-D8mdfLhE.js";import{r as o,u as t,L as d}from"./router-DQ2x9woV.js";/* empty css                  */import"./react-CMmhtoO5.js";const l=()=>{const[l,m]=o.useState({name:"",email:"",password:"",confirmPassword:"",companyName:"",phone:"",address:""}),[c,u]=o.useState(!1),[h,p]=o.useState(null),[g,j]=o.useState(!1),x=t(),f=e=>{m({...l,[e.target.name]:e.target.value})};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-form-container vendor-register",children:[e.jsx("h2",{children:"Vendor Registration"}),h&&e.jsx("div",{className:"auth-error",children:h}),g&&e.jsx("div",{className:"auth-success",children:"Registration successful! Redirecting..."}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),u(!0),p(null),j(!1),l.password!==l.confirmPassword)return p("Passwords do not match"),void u(!1);if(l.password.length<6)return p("Password must be at least 6 characters"),void u(!1);try{const{confirmPassword:e,...o}=l,t=(await a(s,l.email,l.password)).user,d={...o,uid:t.uid,role:"vendor",approved:!1,createdAt:(new Date).toISOString()};await r(n(i,`vendors/${t.uid}`),d),await r(n(i,`users/${t.uid}`),{email:l.email,name:l.name,role:"vendor",createdAt:(new Date).toISOString()}),j(!0),localStorage.setItem("vendorInfo",JSON.stringify(d)),setTimeout((()=>{x("/vendor/dashboard")}),1500)}catch(o){let e="Registration failed. Please try again.";if(o.code)switch(o.code){case"auth/email-already-in-use":e="This email is already registered. Please use a different email or try logging in.",setTimeout((()=>{confirm("Would you like to go to the login page instead?")&&x("/vendor/login")}),1e3);break;case"auth/invalid-email":e="Invalid email address. Please check and try again.";break;case"auth/weak-password":e="Password is too weak. Please use a stronger password.";break;case"auth/network-request-failed":e="Network error. Please check your internet connection and try again.";break;default:e=`Registration failed: ${o.message}`}p(e)}finally{u(!1)}},className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"companyName",children:"Company Name"}),e.jsx("input",{type:"text",id:"companyName",name:"companyName",value:l.companyName,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:l.phone,onChange:f})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"address",children:"Business Address"}),e.jsx("textarea",{id:"address",name:"address",value:l.address,onChange:f,rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:f,required:!0,minLength:"6"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:l.confirmPassword,onChange:f,required:!0,minLength:"6"})]}),e.jsx("button",{type:"submit",className:"auth-button",disabled:c||g,children:c?"Registering...":"Register"})]}),e.jsxs("div",{className:"auth-links",children:[e.jsxs("p",{children:["Already have an account? ",e.jsx(d,{to:"/vendor/login",children:"Login"})]}),e.jsx("p",{children:e.jsx(d,{to:"/",children:"Back to Home"})})]})]})})};export{l as default};
