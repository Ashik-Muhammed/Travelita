import{b as e,c as a,d as s,q as i,o as t,m as n,g as l,j as c,f as r,k as d,p as o,e as m,n as u,s as h}from"./index-B_08A5P-.js";import{r as p,L as g,d as x,u as j}from"./router-CE_eIJm-.js";import"./react-CMmhtoO5.js";const v=()=>{const[o,m]=p.useState([]),[u,h]=p.useState(!0),[x,j]=p.useState(null),[v,f]=p.useState({show:!1,packageId:null});p.useEffect((()=>{b()}),[]);const b=async()=>{try{h(!0),j(null);const c=e.currentUser;if(!c)return j("Authentication required"),void h(!1);const r=a(s,"tourPackages"),d=i(r,t("vendorId"),n(c.uid)),o=await l(d);if(!o.exists())return m([]),void h(!1);const u=[];o.forEach((e=>{u.push({id:e.key,...e.val()})})),m(u)}catch(c){j("Failed to fetch packages. Please try again.")}finally{h(!1)}};return u?c.jsx("div",{className:"packages-loading",children:"Loading packages..."}):x?c.jsx("div",{className:"packages-error",children:x}):0===o.length?c.jsx("div",{className:"no-packages",children:c.jsx("p",{children:"You haven't added any tour packages yet."})}):c.jsxs("div",{className:"vendor-packages",children:[c.jsx("div",{className:"packages-grid",children:o.map((i=>c.jsxs("div",{className:"package-card",children:[c.jsxs("div",{className:"package-image",children:[c.jsx("img",{src:i.images&&i.images.length>0?i.images[0]:"https://via.placeholder.com/300x200?text=No+Image",alt:i.title}),c.jsx("span",{className:"package-status "+(i.available?"active":"inactive"),children:i.available?"Active":"Inactive"})]}),c.jsxs("div",{className:"package-content",children:[c.jsx("h3",{children:i.title}),c.jsxs("p",{className:"package-destination",children:[i.destination," • ",i.duration]}),c.jsxs("p",{className:"package-price",children:["₹",i.price.toLocaleString()]}),c.jsxs("div",{className:"package-actions",children:[c.jsx("button",{className:"status-toggle "+(i.available?"deactivate":"activate"),onClick:()=>(async(i,t)=>{try{if(!e.currentUser)return;const n=a(s,`tourPackages/${i}`);await r(n,{available:!t}),m(o.map((e=>e.id===i?{...e,available:!t}:e)))}catch(n){alert("Failed to update package status")}})(i.id,i.available),children:i.available?"Deactivate":"Activate"}),c.jsx(g,{to:`/packages/${i.id}`,className:"view-button",children:"View"}),c.jsx(g,{to:`/vendor/edit-package/${i.id}`,className:"edit-button",children:"Edit"}),c.jsx("button",{className:"delete-button",onClick:()=>f({show:!0,packageId:i.id}),children:"Delete"})]})]})]},i.id)))}),v.show&&c.jsx("div",{className:"delete-modal",children:c.jsxs("div",{className:"modal-content",children:[c.jsx("h3",{children:"Confirm Deletion"}),c.jsx("p",{children:"Are you sure you want to delete this package? This action cannot be undone."}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"cancel-button",onClick:()=>f({show:!1,packageId:null}),children:"Cancel"}),c.jsx("button",{className:"confirm-button",onClick:async()=>{if(v.packageId)try{if(!e.currentUser)return;const i=a(s,`tourPackages/${v.packageId}`);await d(i),m(o.filter((e=>e.id!==v.packageId))),f({show:!1,packageId:null})}catch(i){alert("Failed to delete package")}},children:"Delete"})]})]})})]})},f=()=>{const[i,t]=p.useState([]),[n,d]=p.useState(!0),[o,m]=p.useState(null),[u,h]=p.useState("all"),[g,x]=p.useState({});p.useEffect((()=>{j()}),[]);const j=async()=>{try{d(!0),m(null);const i=e.currentUser;if(!i)return m("Authentication required"),void d(!1);const n=a(s,"bookings"),c=await l(n);if(!c.exists())return t([]),void d(!1);const r=[];c.forEach((e=>{const a={id:e.key,...e.val()};a.vendorId===i.uid&&r.push(a)})),t(r);const o=[...new Set(r.map((e=>e.packageId)))];await v(o)}catch(i){m("Failed to fetch bookings. Please try again.")}finally{d(!1)}},v=async e=>{try{const i={};for(const t of e){const e=a(s,`tourPackages/${t}`),n=await l(e);n.exists()?i[t]=n.val().title:i[t]="Unknown Package"}x(i)}catch(i){}},f=async(n,l)=>{try{if(!e.currentUser)return;const c=a(s,`bookings/${n}`);await r(c,{status:l,updatedAt:Date.now()}),t(i.map((e=>e.id===n?{...e,status:l}:e)))}catch(c){alert("Failed to update booking status")}},b="all"===u?i:i.filter((e=>e.status===u));return n?c.jsx("div",{className:"bookings-loading",children:"Loading bookings..."}):o?c.jsx("div",{className:"bookings-error",children:o}):c.jsxs("div",{className:"vendor-bookings",children:[c.jsxs("div",{className:"booking-filters",children:[c.jsx("button",{className:"filter-button "+("all"===u?"active":""),onClick:()=>h("all"),children:"All"}),c.jsx("button",{className:"filter-button "+("pending"===u?"active":""),onClick:()=>h("pending"),children:"Pending"}),c.jsx("button",{className:"filter-button "+("confirmed"===u?"active":""),onClick:()=>h("confirmed"),children:"Confirmed"}),c.jsx("button",{className:"filter-button "+("completed"===u?"active":""),onClick:()=>h("completed"),children:"Completed"}),c.jsx("button",{className:"filter-button "+("cancelled"===u?"active":""),onClick:()=>h("cancelled"),children:"Cancelled"})]}),0===b.length?c.jsx("div",{className:"no-bookings",children:c.jsxs("p",{children:["No ","all"!==u?u:""," bookings found."]})}):c.jsx("div",{className:"bookings-table",children:c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Booking ID"}),c.jsx("th",{children:"Package"}),c.jsx("th",{children:"Customer"}),c.jsx("th",{children:"Booking Date"}),c.jsx("th",{children:"Price"}),c.jsx("th",{children:"Status"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:b.map((e=>{var a,s;return c.jsxs("tr",{children:[c.jsx("td",{children:e.id.substring(0,8)}),c.jsx("td",{children:g[e.packageId]||"Unknown Package"}),c.jsx("td",{children:e.customerName||e.userName||"Unknown"}),c.jsx("td",{children:(s=e.bookingDate||e.createdAt,new Date(s).toLocaleDateString())}),c.jsxs("td",{children:["₹",(null==(a=e.price)?void 0:a.toLocaleString())||"N/A"]}),c.jsx("td",{children:c.jsx("span",{className:`status-badge ${e.status}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),c.jsx("td",{children:c.jsxs("div",{className:"booking-actions",children:["pending"===e.status&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"confirm-button",onClick:()=>f(e.id,"confirmed"),children:"Confirm"}),c.jsx("button",{className:"cancel-button",onClick:()=>f(e.id,"cancelled"),children:"Cancel"})]}),"confirmed"===e.status&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"complete-button",onClick:()=>f(e.id,"completed"),children:"Mark Complete"}),c.jsx("button",{className:"cancel-button",onClick:()=>f(e.id,"cancelled"),children:"Cancel"})]}),("completed"===e.status||"cancelled"===e.status)&&c.jsx("span",{children:"No actions available"})]})})]},e.id)}))})]})})]})},b=({vendorInfo:e})=>{const[i,t]=p.useState({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",companyName:(null==e?void 0:e.companyName)||"",phone:(null==e?void 0:e.phone)||"",address:(null==e?void 0:e.address)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[n,l]=p.useState(!1),[d,o]=p.useState(!1),[m,u]=p.useState(null),[h,g]=p.useState(null),[x,j]=p.useState(!1),v=e=>{t({...i,[e.target.name]:e.target.value})};return c.jsxs("div",{className:"vendor-profile",children:[c.jsx("h2",{children:"Profile Information"}),m&&c.jsx("div",{className:"profile-error",children:m}),h&&c.jsx("div",{className:"profile-success",children:h}),c.jsxs("form",{onSubmit:async e=>{var n,c;e.preventDefault(),o(!0),u(null),g(null);try{const e=JSON.parse(localStorage.getItem("user"));if(!e||!e.uid)return u("Authentication required"),void o(!1);const n={name:i.name,companyName:i.companyName,phone:i.phone,address:i.address,updatedAt:Date.now()},c=a(s,`users/${e.uid}`);await r(c,n),g("Profile updated successfully");const d={...e,...n};localStorage.setItem("user",JSON.stringify(d)),x&&(t({...i,currentPassword:"",newPassword:"",confirmPassword:""}),j(!1)),l(!1)}catch(d){u((null==(c=null==(n=d.response)?void 0:n.data)?void 0:c.message)||"Failed to update profile. Please try again.")}finally{o(!1)}},className:"profile-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Full Name"}),c.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:v,disabled:!n,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",name:"email",value:i.email,disabled:!0,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"companyName",children:"Company Name"}),c.jsx("input",{type:"text",id:"companyName",name:"companyName",value:i.companyName,onChange:v,disabled:!n,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"phone",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phone",name:"phone",value:i.phone,onChange:v,disabled:!n})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"address",children:"Business Address"}),c.jsx("textarea",{id:"address",name:"address",value:i.address,onChange:v,rows:"3",disabled:!n})]}),n&&x&&c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Change Password"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:i.currentPassword,onChange:v})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"newPassword",children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:i.newPassword,onChange:v,minLength:"6"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:i.confirmPassword,onChange:v,minLength:"6"})]})]}),c.jsx("div",{className:"profile-actions",children:n?c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"submit",className:"save-button",disabled:d,children:d?"Saving...":"Save Changes"}),c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{l(!1),j(!1),t({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",companyName:(null==e?void 0:e.companyName)||"",phone:(null==e?void 0:e.phone)||"",address:(null==e?void 0:e.address)||"",currentPassword:"",newPassword:"",confirmPassword:""})},children:"Cancel"}),!x&&c.jsx("button",{type:"button",className:"password-button",onClick:()=>j(!0),children:"Change Password"})]}):c.jsx(c.Fragment,{children:c.jsx("button",{type:"button",className:"edit-button",onClick:()=>l(!0),children:"Edit Profile"})})})]})]})},N=({onSuccess:i,isEditing:t=!1,packageData:n=null})=>{const{packageId:d}=x(),u=j(),[h,g]=p.useState({title:"",description:"",destination:"",duration:"",price:"",included:["","",""],available:!0,featured:!1}),[v,f]=p.useState([{title:"Day 1",description:""}]),[b,N]=p.useState([]),[k,y]=p.useState(!!t),[w,P]=p.useState(!1),[C,S]=p.useState(null),[F,I]=p.useState(null),[D,A]=p.useState([]);p.useEffect((()=>{t&&d?E():n&&$(n)}),[t,d,n]);const E=async()=>{try{y(!0),S(null);const e=a(s,`tourPackages/${d}`),i=await l(e);if(!i.exists())throw new Error("Package not found");const t=i.val();$(t)}catch(e){S("Failed to fetch package details for editing")}finally{y(!1)}},$=e=>{var a,s;g({title:e.title||"",description:e.description||"",destination:e.destination||"",duration:e.duration||"",price:e.price||"",included:(null==(a=e.included)?void 0:a.length)>0?e.included:["","",""],available:void 0===e.available||e.available,featured:e.featured||!1}),f((null==(s=e.itinerary)?void 0:s.length)>0?e.itinerary:[{title:"Day 1",description:""}]),e.images&&e.images.length>0&&A(e.images.map((e=>({url:e.startsWith("http")?e:"https://source.unsplash.com/random/800x600/?travel",name:"string"==typeof e?e.split("/").pop():"image",isExisting:!0}))))},q=e=>{const{name:a,value:s,type:i,checked:t}=e.target;g({...h,[a]:"checkbox"===i?t:s})},U=(e,a,s)=>{const i=[...v];i[e]={...i[e],[a]:s},f(i)};return k?c.jsx("div",{className:"package-form-loading",children:"Loading package data..."}):c.jsxs("div",{className:"package-form-container",children:[c.jsx("h2",{children:t?"Edit Tour Package":"Create New Tour Package"}),c.jsxs("p",{className:"form-subtitle",children:["Fill in the details below to ",t?"update your":"create a new"," tour package"]}),C&&c.jsxs("div",{className:"form-error",children:[c.jsx("i",{className:"fas fa-exclamation-circle"})," ",C]}),F&&c.jsxs("div",{className:"form-success",children:[c.jsx("i",{className:"fas fa-check-circle"})," ",F]}),c.jsxs("form",{onSubmit:async n=>{var c,d;n.preventDefault(),P(!0),S(null),I(null);try{const n=e.currentUser,c=localStorage.getItem("vendorInfo");if(!n||!c)return S("Authentication required"),void P(!1);const d=a(s,`vendors/${n.uid}`);if(!(await l(d)).exists())return S("Vendor authentication required"),void P(!1);const u=new FormData;u.append("title",h.title),u.append("description",h.description),u.append("destination",h.destination),u.append("duration",h.duration),u.append("price",h.price),u.append("available",h.available),u.append("featured",h.featured);const p=h.included.filter((e=>""!==e.trim()));u.append("included",JSON.stringify(p));const g=v.filter((e=>""!==e.description.trim()));u.append("itinerary",JSON.stringify(g));const x=D.filter((e=>e.isExisting)).map((e=>e.name));u.append("existingImages",JSON.stringify(x)),b.forEach((e=>{u.append("images",e)}));const j={title:h.title,description:h.description,destination:h.destination,duration:h.duration,price:parseFloat(h.price),included:p,itinerary:g,available:h.available,featured:h.featured,vendorId:n.uid,createdAt:Date.now(),updatedAt:Date.now()};let f,N;if(t){const e=a(s,`tourPackages/${f}`);await r(e,{...j,updatedAt:Date.now()}),N={data:{...j,id:f}},I("Package updated successfully")}else{const e=a(s,"tourPackages"),i=o(e);f=i.key,await m(i,j),N={data:{...j,id:f}},I("New package created successfully")}i&&setTimeout((()=>{i(N.data)}),1500)}catch(u){S((null==(d=null==(c=u.response)?void 0:c.data)?void 0:d.message)||"Failed to save package. Please try again.")}finally{P(!1)}},className:"package-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"title",children:"Package Title*"}),c.jsx("input",{type:"text",id:"title",name:"title",value:h.title,onChange:q,placeholder:"Enter an attractive package title",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"description",children:"Description*"}),c.jsx("textarea",{id:"description",name:"description",value:h.description,onChange:q,rows:"4",placeholder:"Provide a detailed description of the package, including highlights and unique experiences",required:!0}),c.jsx("small",{className:"form-hint",children:"A compelling description helps travelers understand what makes this package special"})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Package Details"}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"destination",children:"Destination*"}),c.jsx("input",{type:"text",id:"destination",name:"destination",value:h.destination,onChange:q,placeholder:"e.g. Kerala, Goa, Rajasthan",required:!0}),c.jsx("small",{className:"form-hint",children:"Popular destination name that travelers will search for"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"duration",children:"Duration*"}),c.jsx("input",{type:"text",id:"duration",name:"duration",value:h.duration,onChange:q,placeholder:"e.g. 3 Days / 2 Nights",required:!0}),c.jsx("small",{className:"form-hint",children:"Format as 'X Days / Y Nights'"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"price",children:"Price (₹)*"}),c.jsxs("div",{className:"price-input-wrapper",children:[c.jsx("span",{className:"price-currency",children:"₹"}),c.jsx("input",{type:"number",id:"price",name:"price",value:h.price,onChange:q,min:"0",placeholder:"e.g. 15000",required:!0})]}),c.jsx("small",{className:"form-hint",children:"Price per person in Indian Rupees"})]})]})]}),c.jsxs("div",{className:"form-row checkbox-row",children:[c.jsxs("div",{className:"form-group checkbox-group",children:[c.jsx("input",{type:"checkbox",id:"available",name:"available",checked:h.available,onChange:q}),c.jsx("label",{htmlFor:"available",children:"Available for Booking"}),c.jsx("small",{className:"checkbox-hint",children:"Uncheck to hide this package from search results"})]}),c.jsxs("div",{className:"form-group checkbox-group",children:[c.jsx("input",{type:"checkbox",id:"featured",name:"featured",checked:h.featured,onChange:q}),c.jsx("label",{htmlFor:"featured",children:"Featured Package"}),c.jsx("small",{className:"checkbox-hint",children:"Featured packages appear on the homepage"})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"What's Included"}),c.jsx("p",{className:"section-description",children:"List the amenities, services, and experiences included in this package"}),c.jsx("div",{className:"included-items-container",children:h.included.map(((e,a)=>c.jsxs("div",{className:"included-item",children:[c.jsx("div",{className:"included-item-icon",children:c.jsx("i",{className:"fas fa-check-circle"})}),c.jsx("input",{type:"text",value:e,onChange:e=>((e,a)=>{const s=[...h.included];s[e]=a,g({...h,included:s})})(a,e.target.value),placeholder:"e.g. Accommodation, Meals, Transportation, etc."}),c.jsx("button",{type:"button",className:"remove-button",onClick:()=>(e=>{const a=[...h.included];a.splice(e,1),g({...h,included:a})})(a),"aria-label":"Remove item",children:c.jsx("i",{className:"fas fa-times"})})]},`included-${a}`)))}),c.jsxs("button",{type:"button",className:"add-button",onClick:()=>{g({...h,included:[...h.included,""]})},children:[c.jsx("i",{className:"fas fa-plus"})," Add Item"]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Itinerary Details"}),c.jsx("p",{className:"section-description",children:"Create a day-by-day breakdown of activities and experiences"}),c.jsx("div",{className:"itinerary-container",children:v.map(((e,a)=>c.jsxs("div",{className:"itinerary-item",children:[c.jsx("div",{className:"itinerary-day-number",children:a+1}),c.jsxs("div",{className:"itinerary-content",children:[c.jsxs("div",{className:"itinerary-header",children:[c.jsx("input",{type:"text",value:e.title,onChange:e=>U(a,"title",e.target.value),placeholder:`Day ${a+1}`,className:"itinerary-day-title"}),c.jsx("button",{type:"button",className:"remove-button small",onClick:()=>(e=>{const a=[...v];a.splice(e,1);const s=a.map(((e,a)=>({...e,title:e.title.startsWith("Day ")?`Day ${a+1}`:e.title})));f(s)})(a),"aria-label":"Remove day",children:c.jsx("i",{className:"fas fa-trash-alt"})})]}),c.jsx("textarea",{value:e.description,onChange:e=>U(a,"description",e.target.value),placeholder:"Describe the activities, meals, accommodations, and highlights for this day in detail",rows:"3",className:"itinerary-description"})]})]},`itinerary-${a}`)))}),c.jsxs("button",{type:"button",className:"add-button",onClick:()=>{f([...v,{title:`Day ${v.length+1}`,description:""}])},children:[c.jsx("i",{className:"fas fa-calendar-plus"})," Add Another Day"]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Package Images"}),c.jsx("p",{className:"section-description",children:"Upload high-quality images that showcase the destination and experiences"}),c.jsxs("div",{className:"image-upload-container",children:[c.jsxs("div",{className:"image-upload-input",children:[c.jsx("input",{type:"file",id:"images",name:"images",onChange:e=>{const a=Array.from(e.target.files);N([...b,...a]);const s=a.map((e=>({url:URL.createObjectURL(e),name:e.name,isExisting:!1})));A([...D,...s])},multiple:!0,accept:"image/*",className:"file-input"}),c.jsxs("label",{htmlFor:"images",className:"custom-file-upload",children:[c.jsx("i",{className:"fas fa-cloud-upload-alt"})," Select Images"]}),c.jsx("small",{className:"form-hint",children:"You can select multiple images at once"})]}),D.length>0&&c.jsx("div",{className:"image-preview-grid",children:D.map(((e,a)=>c.jsxs("div",{className:"image-preview-item",children:[c.jsx("img",{src:e.url,alt:`Preview ${a+1}`}),c.jsx("button",{type:"button",className:"image-preview-remove",onClick:()=>(e=>{const a=[...b],s=[...D];if(!s[e].isExisting){const i=b.findIndex((a=>a.name===s[e].name));-1!==i&&a.splice(i,1)}s.splice(e,1),N(a),A(s)})(a),"aria-label":"Remove image",children:c.jsx("i",{className:"fas fa-times"})}),c.jsx("div",{className:"image-preview-info",children:c.jsxs("span",{className:"image-name",children:[e.isExisting?"Existing: ":"",e.name.length>15?`${e.name.substring(0,15)}...`:e.name]})})]},`image-${a}`)))})]})]}),c.jsxs("div",{className:"form-buttons",children:[c.jsxs("button",{type:"button",className:"cancel-button",onClick:()=>{i?i():u(-1)},children:[c.jsx("i",{className:"fas fa-times"})," Cancel"]}),c.jsx("button",{type:"submit",className:"submit-button",disabled:w,children:w?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"loading-spinner"}),t?"Updating...":"Creating..."]}):c.jsxs(c.Fragment,{children:[c.jsx("i",{className:"fas fa-save"})," ",t?"Update Package":"Create Package"]})})]})]})]})},k=()=>{const[i,t]=p.useState("packages"),[n,r]=p.useState(!0),[d,o]=p.useState(null),[m,g]=p.useState(null),[x,k]=p.useState(!1),y=j();p.useEffect((()=>{r(!0);const i=u(e,(async i=>{if(!i)return y("/vendor/login"),void r(!1);try{const t=a(s,`vendors/${i.uid}`),n=await l(t);if(!n.exists())return o("This account is not registered as a vendor. Please use the customer login."),await h(e),void y("/vendor/login");const c=n.val();g(c),localStorage.setItem("vendorInfo",JSON.stringify(c))}catch(t){o("Failed to load vendor profile. Please try logging in again.")}finally{r(!1)}}));return()=>i()}),[y]);return n?c.jsx("div",{className:"vendor-dashboard-loading",children:"Loading dashboard..."}):d?c.jsx("div",{className:"vendor-dashboard-error",children:d}):c.jsxs("div",{className:"vendor-dashboard-container",children:[c.jsxs("div",{className:"vendor-dashboard-header",children:[c.jsx("h1",{children:"Vendor Dashboard"}),c.jsxs("div",{className:"vendor-dashboard-welcome",children:["Welcome, ",(null==m?void 0:m.name)||"Vendor","!"]}),c.jsx("div",{className:"dashboard-actions",children:c.jsx("button",{className:"logout-button",onClick:async()=>{try{await h(e),localStorage.removeItem("vendorInfo"),y("/vendor/login")}catch(a){o("Failed to log out. Please try again.")}},children:"Logout"})})]}),c.jsxs("div",{className:"vendor-dashboard-content",children:[c.jsxs("div",{className:"vendor-dashboard-tabs",children:[c.jsx("button",{className:"tab-button "+("packages"===i?"active":""),onClick:()=>{t("packages"),k(!1)},children:"Tour Packages"}),c.jsx("button",{className:"tab-button "+("bookings"===i?"active":""),onClick:()=>{t("bookings"),k(!1)},children:"Bookings"}),c.jsx("button",{className:"tab-button "+("profile"===i?"active":""),onClick:()=>{t("profile"),k(!1)},children:"Profile"})]}),c.jsxs("div",{className:"vendor-dashboard-view",children:["packages"===i&&!x&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"packages-header",children:[c.jsx("h2",{children:"My Tour Packages"}),c.jsx("button",{className:"add-package-button",onClick:()=>k(!0),children:"Add New Package"})]}),c.jsx(v,{})]}),"packages"===i&&x&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"packages-header",children:[c.jsx("h2",{children:"Add New Package"}),c.jsx("button",{className:"back-button",onClick:()=>k(!1),children:"Back to Packages"})]}),c.jsx(N,{onSuccess:()=>k(!1)})]}),"bookings"===i&&c.jsx(f,{}),"profile"===i&&c.jsx(b,{vendorInfo:m})]})]})]})};export{k as default};
